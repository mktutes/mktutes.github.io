<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.83.1" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>1.5: Permission :: My New Hugo Site</title>

    
    <link href="/css/nucleus.css?1632053186" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1632053186" rel="stylesheet">
    <link href="/css/featherlight.min.css?1632053186" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1632053186" rel="stylesheet">
    <link href="/css/auto-complete.css?1632053186" rel="stylesheet">
    <link href="/css/theme.css?1632053186" rel="stylesheet">
    <link href="/css/tabs.css?1632053186" rel="stylesheet">
    <link href="/css/hugo-theme.css?1632053186" rel="stylesheet">
    
    <link href="/css/theme-blue.css?1632053186" rel="stylesheet">
    
    

    <script src="/js/jquery.min.js?1632053186"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/part-1/p1-ch4/">
    <nav id="sidebar" class="">
  
  
  <div id="header-wrapper">
    <div id="header">
      <a id="logo"
  style="
    color: white;
    font-family: 'Novacento Sans Wide', 'Helvetica', 'Tahoma', 'Geneva', 'Arial', sans-serif;
    font-size: 30px;
    font-weight: bold;
    margin-top: -2px;
  "
  href="/">
  <b style="font-size: 120%;">MK</b> &nbsp; <i class="fab fa-linux"></i> &nbsp; Linux  
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1632053186"></script>
<script type="text/javascript" src="/js/auto-complete.js?1632053186"></script>
<script type="text/javascript">
    
    
    var index_url="/index.json";
    var root_url="/";
    var baseUri=root_url.replace(/\/$/, '');
</script>
<script type="text/javascript" src="/js/search.js?1632053186"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href="/"><i class="fas fa-home"></i> Home</a>
        </li>
      </ul>
    </section>
  

  <div class="highlightable">
    <ul class="topics">
      
        
        





  
		
    
      
      
      <li data-nav-id="/part-0/" title="Setting the Stage" class="dd-item">
        <a href="/part-0/">
          <b>0. </b>
Setting the Stage

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-0/p0-ch1/" title="Acknowledgement" class="dd-item">
        <a href="/part-0/p0-ch1/">
          
Acknowledgement

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/part-1/" title="Getting Started" class="dd-item parent">
        <a href="/part-1/">
          <b>1. </b>
Getting Started

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch1/" title="1.1: Introduction" class="dd-item">
        <a href="/part-1/p1-ch1/">
          
1.1: Introduction

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch2/" title="1.2: Command Syntax" class="dd-item">
        <a href="/part-1/p1-ch2/">
          
Command Syntax

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch3a/" title="1.3: File System: Basics" class="dd-item">
        <a href="/part-1/p1-ch3a/">
          
1.3: File System: Basics

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch3b/" title="1.4: File System: Wildcards" class="dd-item">
        <a href="/part-1/p1-ch3b/">
          
1.4: File System: Wildcards

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch4/" title="1.5: Permission" class="dd-item active">
        <a href="/part-1/p1-ch4/">
          
1.5: Permission

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch5/" title="1.6: IO Redirection" class="dd-item">
        <a href="/part-1/p1-ch5/">
          
1.6: IO Redirection

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch6/" title="1.7: Viewing Files" class="dd-item">
        <a href="/part-1/p1-ch6/">
          
1.7: Viewing Files

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch7/" title="1.8: Data Manipulation" class="dd-item">
        <a href="/part-1/p1-ch7/">
          
1.8: Data Manipulation

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch8/" title="1.9: Running Commands" class="dd-item">
        <a href="/part-1/p1-ch8/">
          
1.9: Running Commands

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/part-2/" title="Text Processing" class="dd-item">
        <a href="/part-2/">
          <b>2. </b>
Text Processing

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-2/p2-ch1/" title="2.1: Regular Expressions" class="dd-item">
        <a href="/part-2/p2-ch1/">
          
2.1: Regular Expressions

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-2/p2-ch2/" title="2.2: Vi Editor" class="dd-item">
        <a href="/part-2/p2-ch2/">
          
2.2: Vi Editor

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-2/p2-ch3/" title="2.3: Searching Text" class="dd-item">
        <a href="/part-2/p2-ch3/">
          
2.3: Searching Text

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-2/p2-ch4/" title="2.4: Text Substitution" class="dd-item">
        <a href="/part-2/p2-ch4/">
          
2.4: Text Substitution

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-2/p2-ch5/" title="2.4: AWK programming Language" class="dd-item">
        <a href="/part-2/p2-ch5/">
          
2.4: AWK programming Language

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/part-3/" title="Beyond the Basics" class="dd-item">
        <a href="/part-3/">
          <b>3. </b>
Beyond the Basics

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch1/" title="3.1: Process Management" class="dd-item">
        <a href="/part-3/p3-ch1/">
          
3.1: Process Management

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch2/" title="3.2: Scheduling Jobs" class="dd-item">
        <a href="/part-3/p3-ch2/">
          
3.2: Scheduling Jobs

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch4/" title="3.3: Remote Access Commands" class="dd-item">
        <a href="/part-3/p3-ch4/">
          
3.3: Remote Access Commands

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch3/" title="3.4: Archival commands" class="dd-item">
        <a href="/part-3/p3-ch3/">
          
3.4: Archival commands

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch5/" title="3.5: The &#34;find&#34; Command" class="dd-item">
        <a href="/part-3/p3-ch5/">
          
3.5: The &#34;find&#34; Command

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch6/" title="3.6: The &#34;xargs&#34; Command" class="dd-item">
        <a href="/part-3/p3-ch6/">
          
3.6: The &#34;xargs&#34; Command

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/part-4/" title="Shell Scripting" class="dd-item">
        <a href="/part-4/">
          <b>4. </b>
Shell Scripting

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-4/p4-ch1/" title="4.1: Introduction to Shell Scripts" class="dd-item">
        <a href="/part-4/p4-ch1/">
          
4.1: Introduction to Shell Scripts

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/part-5/" title="Appendix" class="dd-item">
        <a href="/part-5/">
          <b>9. </b>
Appendix

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-5/p5-ch1/" title="Commands Summary" class="dd-item">
        <a href="/part-5/p5-ch1/">
          
Commands Summary

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-5/p5-ch2/" title="Special Characters" class="dd-item">
        <a href="/part-5/p5-ch2/">
          
Special Characters

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
      
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
            <li>
                <a class="padding" href="http://example.org/tags"><i class='fas fa-tags'></i> Tags</a>
            </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Linux Basics</a> > <a href='/part-1/'>Getting Started</a> > 1.5: Permission
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#chapter-5">Chapter 5</a></li>
        <li><a href="#introduction">Introduction</a></li>
      </ul>
    </li>
    <li><a href="#authentication-and-authorization">Authentication and Authorization</a>
      <ul>
        <li><a href="#authentication-authn">Authentication (AuthN)</a></li>
        <li><a href="#authorization-authz">Authorization (<code>AuthZ</code>)</a></li>
      </ul>
    </li>
    <li><a href="#file-permissions">File Permissions</a></li>
    <li><a href="#commands-file-permission">Commands: File Permission</a>
      <ul>
        <li><a href="#setting-up-the-stage">Setting up the stage</a></li>
        <li><a href="#umask-set-or-get-default-permission"><code>umask</code>: set or get default permission</a></li>
        <li><a href="#ls--l-long-listing-of-files-get-permission-settings"><code>ls -l</code>: long listing of files: get permission settings</a></li>
        <li><a href="#stat-get-information-about-files"><code>stat</code>: get information about files</a></li>
        <li><a href="#chmod-change-mode-or-permission-settings"><code>chmod</code>: change mode or permission settings</a></li>
        <li><a href="#id-view-user-info"><code>id</code>: view user info</a></li>
        <li><a href="#groups-view-group-info-of-an-user"><code>groups</code>: view group info of an user**</a></li>
        <li><a href="#chown-change-ownership-associated-with-file"><code>chown</code>: change ownership associated with file</a></li>
        <li><a href="#chgrp-change-group-associated-with-file"><code>chgrp</code>: change group associated with file</a></li>
        <li><a href="#passwd-change-password"><code>passwd</code>: change password</a></li>
      </ul>
    </li>
    <li><a href="#create-users-and-groups">Create Users and Groups</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              1.5: Permission
            </h1>
          

        


<h3 id="chapter-5">Chapter 5</h3>
<h3 id="introduction">Introduction</h3>
<p>Linux is a multi-user operating system. In order to access a  system, we need credentials, <strong>user id</strong> and a <strong>key or token</strong>. I did not use the term &ldquo;<strong>password</strong>&quot;; though it is the predominant way of gaining access, it is not the only way. Once we login to the system, we typically create and view files and directories. Since multiple users can login at the same time, Linux provides mechanism to avoid conflicts in creation and usage of files. This is accomplished thru <strong>permissions</strong>.</p>
<h2 id="authentication-and-authorization">Authentication and Authorization</h2>
<p>When we talk about permissions in Linux, we typically mean who are authorized to access a file and what kind of access the user(s) have. This is the main topic of this chapter. However we must be aware of a different type of permission that deals with gaining access to the system itself before we can access any file. Let us briefly discuss about <em>authentication</em> and <em>authorization</em>.</p>
<p><img src="/images/04a_authz_authn.png" alt="Authorization and Authentication"></p>
<h3 id="authentication-authn">Authentication (AuthN)</h3>
<p><em>Authentication</em> is a mechanism that is used by the machine to validate the user&rsquo;s identity. Typically, it is done using an <strong>userid</strong> and a <strong>password</strong>. There are other options like <strong>SSH</strong> keys that can be used in place of password. This is called <strong>Single Factor Authentication (SFA)</strong>.</p>
<p>Nowadays, systems use <strong>Multi-factor Authentication (MFA)</strong> that expects a token generated from a trusted device in addition to the <strong>SFA</strong>. The <strong>MFA</strong> setup uses physical devices like <strong>RSA Tokens</strong> or applications such as <strong>Google Authenticator</strong> that generates numeric token that should be entered after user id and password. Other methods of MFA include <strong>OTP</strong> - One Time Password, Fingerprint authentication using external applications etc..</p>
<p>In the Linux servers, a <strong>sysadmin</strong> typically creates an <strong>user credentials</strong> with settings like password length, allowed characters, number of days before user need to change the password. This is not something we need to know as a <strong>general user</strong>. We will briefly discuss the commands used for awareness. Once you have credentials, then the <strong>authorization</strong> part takes over.</p>
<p><strong>The below commands will be used by Sysadmins, These are listed here for completeness</strong></p>
<blockquote>
<p>You may play around with these commands using <strong>google cloud shell</strong>, if you are interested. Access the <code>man</code> page for additional information.</p>
</blockquote>
<blockquote>
<p>For demo purpose, I have created few users and groups on <strong>GCS</strong> that will be used in this chapter and later when we discuss the <code>find</code> command.</p>
</blockquote>
<table>
<thead>
<tr>
<th>#</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>useradd</code></td>
<td>create new user id</td>
</tr>
<tr>
<td>2</td>
<td><code>adduser</code></td>
<td>same as <code>useradd</code>, some installation have this one</td>
</tr>
<tr>
<td>3</td>
<td><code>usermod</code></td>
<td>modify an existing user info</td>
</tr>
<tr>
<td>4</td>
<td><code>userdel</code></td>
<td>delete user</td>
</tr>
<tr>
<td>5</td>
<td><code>groupadd</code></td>
<td>creating new group</td>
</tr>
<tr>
<td>6</td>
<td><code>groupmod</code></td>
<td>modify an existing group info</td>
</tr>
<tr>
<td>7</td>
<td><code>groupdel</code></td>
<td>delete group</td>
</tr>
</tbody>
</table>
<h3 id="authorization-authz">Authorization (<code>AuthZ</code>)</h3>
<p><em>Authorization</em> deals with access rights, that is, what the user can view, change or do once the <em>authentication</em> is successful. This is the main focus of this chapter. We will look into different aspects of <strong>permissions</strong> associated with the files and directories with respect to the users and the actions they can perform on these files and directories.</p>
<h2 id="file-permissions">File Permissions</h2>
<p>Everything in Unix is treated as files and every file has an owner and explicit access permission associated with it. The permissions determine who can have access to these files and what type of access they have. We have already discussed about <em>Authentication</em> and <em>Authorization</em>. In this section, we will look into <strong>authorization</strong> and understand how the system determines who have access to which files and directories.</p>
<p>Permissions are associated with various <strong>actors</strong> in the system and the files and directories can have different <strong>access</strong> associated with them. The <em>owner</em> or the <em>super user</em> or <em>root user</em> can perform various <strong>actions</strong> in terms of providing permissions to various <em>actors</em>.</p>
<p><img src="/images/04b_permission.png" alt=""></p>
<blockquote>
<p>The abbreviations listed in the <strong>actors</strong>, <strong>access</strong> and <strong>actions</strong> tables below are used in the commands related to granting or revoking permission to files and directories.</p>
</blockquote>
<p><strong>Actors</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Abbr</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>User</td>
<td><strong>u</strong></td>
<td>owner of the file</td>
</tr>
<tr>
<td>Group</td>
<td><strong>g</strong></td>
<td>default group the owner belong to</td>
</tr>
<tr>
<td>Others</td>
<td><strong>o</strong></td>
<td>users that are not part of the group</td>
</tr>
<tr>
<td>All</td>
<td><strong>a</strong></td>
<td>every user in the system</td>
</tr>
</tbody>
</table>
<p><strong>Actions</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Abbr</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Add</td>
<td><strong>+</strong></td>
<td>add permission</td>
</tr>
<tr>
<td>Remove</td>
<td><strong>-</strong></td>
<td>remove permission</td>
</tr>
<tr>
<td>Assign</td>
<td><strong>=</strong></td>
<td>discard existing permissions and assign new permissions</td>
</tr>
</tbody>
</table>
<p><strong>Access</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Abbr</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Read</td>
<td><strong>r</strong></td>
<td>reading from files</td>
</tr>
<tr>
<td></td>
<td></td>
<td>viewing contents of directories</td>
</tr>
<tr>
<td>Write</td>
<td><strong>w</strong></td>
<td>writing into files</td>
</tr>
<tr>
<td></td>
<td></td>
<td>create, delete files and directories</td>
</tr>
<tr>
<td>Execute</td>
<td><strong>x</strong></td>
<td>execute files (code)</td>
</tr>
<tr>
<td></td>
<td></td>
<td>view or modify metadata of files</td>
</tr>
<tr>
<td>User</td>
<td><strong>u</strong></td>
<td>set same permission as owner; <code>g=u</code></td>
</tr>
<tr>
<td>Group</td>
<td><strong>g</strong></td>
<td>set same permission as group; <code>o=g</code></td>
</tr>
<tr>
<td>Others</td>
<td><strong>o</strong></td>
<td>set same permission as others; <code>g=o</code></td>
</tr>
</tbody>
</table>
<p>Permissions can be assigned to <strong>u</strong>ser, default <strong>g</strong>roup and <strong>o</strong>thers.  We can provide three type of access; <strong>r</strong>ead, <strong>w</strong>rite and e<strong>x</strong>ecute or assign the existing permission of one actor to another. The combinations ranging from no permission to all permissions. There are 8 combinations derived from these three type of access that can be represented in <strong>Octal</strong> notation. Numbers <code>4</code>, <code>2</code> and <code>1</code> are assigned to  <strong>r</strong>ead, <strong>w</strong>rite and e<strong>x</strong>ecute and the combinations of these access gets the other values between <code>0-7</code>.</p>
<blockquote>
<p>We have already seen the permission associated with the file or directory thru <code>ls</code> command with <code>-l</code> option.</p>
</blockquote>
<blockquote>
<p>Permissions can be given using the <code>chmod</code> command either by using <strong>actors, actions and access</strong> notation or using <strong>octal</strong> notation</p>
</blockquote>
<table>
<thead>
<tr>
<th>Num</th>
<th>Permission</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td><code>---</code></td>
<td>no permission</td>
</tr>
<tr>
<td><code>1</code></td>
<td><code>--x</code></td>
<td>execute only</td>
</tr>
<tr>
<td><code>2</code></td>
<td><code>-w-</code></td>
<td>write only</td>
</tr>
<tr>
<td><code>3</code></td>
<td><code>-wx</code></td>
<td>write and execute</td>
</tr>
<tr>
<td><code>4</code></td>
<td><code>r--</code></td>
<td>read only</td>
</tr>
<tr>
<td><code>5</code></td>
<td><code>r-x</code></td>
<td>read and execute</td>
</tr>
<tr>
<td><code>6</code></td>
<td><code>rw-</code></td>
<td>read and write</td>
</tr>
<tr>
<td><code>7</code></td>
<td><code>rwx</code></td>
<td>read, write and execute</td>
</tr>
</tbody>
</table>
<h2 id="commands-file-permission">Commands: File Permission</h2>
<p>The following commands are used to</p>
<ul>
<li>view existing permissions on files and directories</li>
<li>view default permissions used when we create files</li>
<li>add / remove / assign permission</li>
<li>information about users, groups, files and directories</li>
</ul>
<table>
<thead>
<tr>
<th>#</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>umask</code></td>
<td>view or set default permission</td>
</tr>
<tr>
<td>2</td>
<td><code>ls</code></td>
<td>view permission info using <code>ls -l</code> option</td>
</tr>
<tr>
<td>3</td>
<td><code>stat</code></td>
<td>view permission and other file stats such as size, owner,..</td>
</tr>
<tr>
<td>4</td>
<td><code>mkdir</code></td>
<td>create directory and override the default permission using <code>-m MODE</code> option</td>
</tr>
<tr>
<td>5</td>
<td><code>chmod</code></td>
<td>change permission on files</td>
</tr>
<tr>
<td>6</td>
<td><code>chown</code></td>
<td>change owner of the file</td>
</tr>
<tr>
<td>7</td>
<td><code>chgrp</code></td>
<td>change group name associated with the file</td>
</tr>
<tr>
<td>8</td>
<td><code>id</code></td>
<td>get info about an user; uid, default group and other groups an user is associated with</td>
</tr>
<tr>
<td>9</td>
<td><code>groups</code></td>
<td>get group info of an user</td>
</tr>
<tr>
<td>10</td>
<td><code>passwd</code></td>
<td>change password for current user or user as argument</td>
</tr>
</tbody>
</table>
<h3 id="setting-up-the-stage">Setting up the stage</h3>
<p>In this demo, we are going to view info about users and groups, permission details of files and directories, change owner and group associated with files and directories. In order to perform these activities, we need to setup some <em>user ids</em>, <em>groups</em> and associate users with one or more groups. Let us setup some files and directories for demo.</p>
<p><strong>Setting up users and groups</strong></p>
<p>Let us create the following users, groups and relationships between users and groups.</p>
<p><img src="/images/04c_users_groups.png" alt=""></p>
<p>Here is how the users and group are set based on the roles and responsibilities. We will create the users and groups in <strong>google cloud shell</strong>, which is an ephemeral or temporary Linux environment. Please refer <strong>Appendix</strong> at the end of the chapter for the actual commands to setup users and groups. We will run the commands to creates these users and groups as a <strong>root user</strong>, who is a <strong>super-user</strong> with more privileges compared to normal users.</p>
<p><strong>Note</strong>: DO NOT Run this on local machine. If you need to practice, use virtual environments or cloud base environments such as <strong>Google Cloud Shell</strong> or <strong>Amazon Elastic Cloud Computing (EC2) instances</strong></p>
<ol>
<li><code>admin (group)</code> : users with admin privilege
<ul>
<li><code>sysadmin</code>: monitor the health of the system</li>
<li><code>dbadmin</code>: database administration</li>
<li><code>itadmin</code>: network and security administration</li>
</ul>
</li>
<li><code>dev (group)</code>: developers group
<ul>
<li><code>mbose</code>: regular user 1</li>
<li><code>sholmes</code>: regular user 2; trouble-shooter</li>
</ul>
</li>
</ol>
<p><strong>Setting up test files and directories</strong></p>
<p><strong>Top-level directory for sample files</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">pwd</span>
/home/mktutes/trng/linux

<span style="color:#6272a4"># top-level directory for demo files</span>
$ mkdir 07_perm
$ <span style="color:#8be9fd;font-style:italic">cd</span> 07_perm
</code></pre></div><p><strong>Sample directories</strong></p>
<p>We have created a common directory called <code>bin</code> and each user has a directory under <code>data</code> named after the user id. These user specific directories will be used to demo the <code>chown</code> and <code>chgrp</code> commands.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">pwd</span>
/home/mktutes/trng/linux/07_perm

$ mkdir -pv bin data/<span style="color:#ff79c6">{</span>sysadmin,dbadmin,itadmin,mbose,sholmes<span style="color:#ff79c6">}</span>
mkdir: created directory <span style="color:#f1fa8c">&#39;bin&#39;</span>
mkdir: created directory <span style="color:#f1fa8c">&#39;data&#39;</span>
mkdir: created directory <span style="color:#f1fa8c">&#39;data/sysadmin&#39;</span>
mkdir: created directory <span style="color:#f1fa8c">&#39;data/dbadmin&#39;</span>
mkdir: created directory <span style="color:#f1fa8c">&#39;data/itadmin&#39;</span>
mkdir: created directory <span style="color:#f1fa8c">&#39;data/mbose&#39;</span>
mkdir: created directory <span style="color:#f1fa8c">&#39;data/sholmes&#39;</span>
</code></pre></div><p><strong>Sample files</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">pwd</span>
/home/mktutes/trng/linux/07_perm

$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#39;print(&#34;Hello World&#34;)&#39;</span> &gt; bin/hello.py
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#39;echo &#34;Hello World&#34;&#39;</span> &gt; bin/hello.sh

<span style="color:#6272a4"># create something similar on the other 4 data/&lt;USER&gt; dirs</span>
<span style="color:#6272a4"># we will change the owner and group of these files</span>
$ date &gt; data/sysadmin/sample.txt
$ date &gt; data/sysadmin/sample.log
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;Hello World&#34;</span> &gt; data/sysadmin/hello.log
</code></pre></div><h3 id="umask-set-or-get-default-permission"><code>umask</code>: set or get default permission</h3>
<p>In Linux, there is a default permission associated with every file and directory when it is created. This is done by setting default permission at the system level that specifices what permissions are <strong>not allowed</strong> for the <strong>user</strong>, <strong>group</strong> and <strong>others</strong>.</p>
<p>We have already seen the <strong>octal</strong> representation of permission settings. When we run the <code>umask</code> command without any <em>arguments</em>, it returns the <em>octal</em> representation of permission <strong>masked</strong> for user, group and others. We can override the default permission by passing new set of permissions in <em>octal</em> format.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-S</code></td>
<td>display permission as symbolic (u, g, o, &hellip;) format instead of octal</td>
</tr>
</tbody>
</table>
<p>The default permission will be usually this. The <strong>octal</strong> format may be cryptic for beginners. We can use the <code>-S</code> option to display the results in symbolic format. Refer the <strong>File Permission</strong> section in case you have any doubts about symbolic and octal representation of permission.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># current permission in octal format</span>
$ <span style="color:#8be9fd;font-style:italic">umask</span>
<span style="color:#bd93f9">0022</span>

<span style="color:#6272a4"># current permission in symbolic format</span>
$ <span style="color:#8be9fd;font-style:italic">umask</span> -S
<span style="color:#8be9fd;font-style:italic">u</span><span style="color:#ff79c6">=</span>rwx,g<span style="color:#ff79c6">=</span>rx,o<span style="color:#ff79c6">=</span>rx
</code></pre></div><ul>
<li>The octal <code>0022</code> represents the <strong>mask</strong> that means nothing is masked for <strong>user</strong>, <strong>w</strong>rite is masked for <strong>group</strong> and <strong>others</strong></li>
<li>The symbolic representation shows similar results, where it shows the actual permissions that will be set for <strong>user</strong>, <strong>group</strong> and <strong>others</strong></li>
</ul>
<h3 id="ls--l-long-listing-of-files-get-permission-settings"><code>ls -l</code>: long listing of files: get permission settings</h3>
<p>We have already discussed the <code>ls</code> command that is used to list files and directories. It is one of the first commands we have seen that supports various options. In the context of permission, we will revisit the command with option <code>-l</code> that enables a long-list. With <code>ls -l</code>, we get a <strong>9 column</strong> output as follows</p>
<ol>
<li>file type and permissions</li>
<li>number of references associated with the file or directory</li>
<li>owner of the file</li>
<li>group to which the owner belong</li>
<li>file size</li>
<li>Month in <code>MMM</code> format</li>
<li>Day of the month in <code>DD</code> format</li>
<li>Time in <code>HH:MM</code> or Year in <code>YYYY</code> format; Year if the file is older than 6 months else time</li>
<li>File name</li>
</ol>
<p>We are interested in the first column alone, which is typically 10 bytes long. The first byte represents the type of file/directory and bytes 2-10 represents the permission string. The 9 bytes are divided into 3 sets that can have the following values.</p>
<ol>
<li>Bytes 2, 5 and 8 are for read permission, can be <code>r</code> or <code>-</code>.</li>
<li>Bytes 3, 6 and 9 are for write permission, can be <code>w</code> or <code>-</code>.</li>
<li>Bytes 4, 7 and 10 are for execute permission, can be <code>x</code> or <code>-</code>.</li>
<li>If there is a <code>-</code> in any of these bytes then the corresponding permission is not enabled.</li>
</ol>
<table>
<thead>
<tr>
<th>Bytes</th>
<th>Actor</th>
</tr>
</thead>
<tbody>
<tr>
<td>2-4</td>
<td>user</td>
</tr>
<tr>
<td>5-7</td>
<td>group</td>
</tr>
<tr>
<td>8-10</td>
<td>others</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># directory: all permissions for user, </span>
<span style="color:#6272a4"># read and exec for group and others</span>
$ ls -l
drwxr-xr-x <span style="color:#bd93f9">2</span> mktutes mktutes <span style="color:#bd93f9">4096</span> Jul <span style="color:#bd93f9">29</span> 03:57 bin
drwxr-xr-x <span style="color:#bd93f9">7</span> mktutes mktutes <span style="color:#bd93f9">4096</span> Jul <span style="color:#bd93f9">28</span> 15:26 data

<span style="color:#6272a4"># file: both file has different set of permissions</span>
<span style="color:#6272a4"># looks like the permissions were changed using `chmod`</span>
$ ls -l bin/
-rwxr-x--- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">57</span> Jul <span style="color:#bd93f9">29</span> 04:14 hello.py
-rwxr-xr-x <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">41</span> Jul <span style="color:#bd93f9">29</span> 04:02 hello.sh
</code></pre></div><h3 id="stat-get-information-about-files"><code>stat</code>: get information about files</h3>
<p>The <code>stat</code> command produces file status information in a multi-line (human-readable) or single-line (machine-readable). This command produces similar but elaborate file status for a given file or wildcard passed as argument.</p>
<p>We can use the <code>stat</code> command as it is to view the permission string along with other file status info or simply use the <code>--format=&quot;%n %f %a&quot;</code> or <code>--format=%n %f %A</code> to view the name, type and permission alone.</p>
<p><strong><code>stat ARG</code>: as-it-is</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ stat bin
  File: bin
  Size: <span style="color:#bd93f9">4096</span>            Blocks: <span style="color:#bd93f9">8</span>          IO Block: <span style="color:#bd93f9">4096</span>   directory
Device: 811h/2065d      Inode: <span style="color:#bd93f9">131087</span>      Links: <span style="color:#bd93f9">2</span>
Access: <span style="color:#ff79c6">(</span>0755/drwxr-xr-x<span style="color:#ff79c6">)</span>  Uid: <span style="color:#ff79c6">(</span> 1000/ mktutes<span style="color:#ff79c6">)</span>   Gid: <span style="color:#ff79c6">(</span> 1001/ mktutes<span style="color:#ff79c6">)</span>
Access: 2021-07-28 15:26:02.662989810 +0000
Modify: 2021-07-29 03:57:02.251138463 +0000
Change: 2021-07-29 03:57:02.251138463 +0000

$ stat bin/hello.
  File: bin/hello.
  Size: <span style="color:#bd93f9">17</span>              Blocks: <span style="color:#bd93f9">8</span>          IO Block: <span style="color:#bd93f9">4096</span>   regular file
Device: 811h/2065d      Inode: <span style="color:#bd93f9">131089</span>      Links: <span style="color:#bd93f9">1</span>
Access: <span style="color:#ff79c6">(</span>0644/-rw-r--r--<span style="color:#ff79c6">)</span>  Uid: <span style="color:#ff79c6">(</span> 1000/ mktutes<span style="color:#ff79c6">)</span>   Gid: <span style="color:#ff79c6">(</span> 1001/ mktutes<span style="color:#ff79c6">)</span>
Access: 2021-07-29 03:57:02.251138463 +0000
Modify: 2021-07-29 03:57:02.251138463 +0000
Change: 2021-07-29 03:57:02.251138463 +0000
</code></pre></div><p><strong><code>stat --format=</code> output</strong></p>
<blockquote>
<p>we can use <code>---format=FMT_STR</code> or <code>-c FMT_STR</code></p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># permission in symbolic format</span>
$ stat --format<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;%n %F %A&#34;</span> bin
bin directory drwxr-xr-x

$ stat --format<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;%n %F %A&#34;</span> bin/hello.py
bin/hello.py regular file -rwxr-x---

<span style="color:#6272a4"># permission in octal format</span>
$ stat -c <span style="color:#f1fa8c">&#34;%n %F %a&#34;</span> bin
bin directory <span style="color:#bd93f9">755</span>

$ stat -c <span style="color:#f1fa8c">&#34;%n %F %a&#34;</span> bin/hello.py
bin/hello.py regular file <span style="color:#bd93f9">750</span>
</code></pre></div><h3 id="chmod-change-mode-or-permission-settings"><code>chmod</code>: change mode or permission settings</h3>
<p>The <code>chmod</code> command is used to add, remove or assign permission settings to the owner, group or others associated with a file or directory. We can change the settings to any of these actors (u, g, o) or the any combination of actors.</p>
<p>By default each file and directory will have permission settings associated with it at the time of creation. Though this is assigned by default on files, we can override the permission settings for directories at the time of creation using the <code>-m MODE</code> option with <code>mkdir</code> command. However, we can change the permission of files and directories at the later stage using the <code>chmod</code> command. It can done by the <strong>owner</strong> of the file or the <strong>super user</strong>.</p>
<p>The <code>chmod</code> command has <strong>two syntax</strong> variations; one that uses the <strong>symbolic</strong> representation (u, g, o, +, -, r, w, &hellip;) and another that uses the <strong>octal</strong> representation.</p>
<table>
<thead>
<tr>
<th>Symbolic Representation</th>
<th>Octal  Representation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Relatively easy to understand</td>
<td>Need to remember octal values and combination</td>
</tr>
<tr>
<td>Can add, remove or assign permission</td>
<td>Only assign permission is supported</td>
</tr>
<tr>
<td>Granular access can be provided at actor level</td>
<td>Entire permission is overwritten for all 3 actors</td>
</tr>
</tbody>
</table>
<p><strong><code>chmod</code> with symbols</strong></p>
<p>Here are some examples</p>
<table>
<thead>
<tr>
<th>Arg</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>u+x</code></td>
<td>add <strong>execute</strong> permission to <strong>user</strong> in addition to existing permission settings</td>
</tr>
<tr>
<td><code>g-w</code></td>
<td>remove <strong>write</strong> permission from <strong>group</strong></td>
</tr>
<tr>
<td><code>o=rx</code></td>
<td>discard existing permission for <strong>others</strong> and assign <strong>read</strong> and <strong>execute</strong></td>
</tr>
<tr>
<td><code>ugo+x</code></td>
<td>add <strong>execute</strong> permission to <strong>user</strong>, <strong>group</strong> and <strong>others</strong></td>
</tr>
<tr>
<td><code>a+x</code></td>
<td>same as <code>ugo+x</code></td>
</tr>
<tr>
<td><code>go=</code></td>
<td>remove all the existing permissions for <strong>group</strong> and <strong>others</strong></td>
</tr>
<tr>
<td><code>g=u</code></td>
<td>assign <strong>group</strong> the same permission as <strong>user</strong></td>
</tr>
<tr>
<td><code>o=u-w</code></td>
<td>assign <strong>others</strong> the same permission of <strong>user</strong> and remove the <strong>write</strong> permission</td>
</tr>
</tbody>
</table>
<p>Check existing permission settings</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">pwd</span>
/home/mktutes/trng/linux/07_perm

<span style="color:#6272a4"># chmod: 2 files</span>
<span style="color:#6272a4">#  user: read and write</span>
<span style="color:#6272a4">#  group and others: read only</span>
$ ls -l bin/
total <span style="color:#bd93f9">8</span>
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">21</span> Jul <span style="color:#bd93f9">29</span> 03:49 hello.py
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">19</span> Jul <span style="color:#bd93f9">29</span> 03:49 hello.sh
</code></pre></div><p>Impact of the <code>execute</code> permission on files.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># let us run the shell script as command</span>
<span style="color:#6272a4"># fails because user does not have execute permission</span>
$ ./bin/hello.sh
-bash: ./bin/hello.sh: Permission denied

<span style="color:#6272a4"># hello.sh: set execute permission</span>
$ chmod u+x bin/hello.sh

<span style="color:#6272a4"># user has execute permission now</span>
$ ls -l bin/hello.sh
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">41</span> Jul <span style="color:#bd93f9">29</span> 03:52 hello.py
-rwxr--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">19</span> Jul <span style="color:#bd93f9">29</span> 03:49 hello.sh

<span style="color:#6272a4"># !! Works now</span>
$ ./bin/hello.sh
Hello World
</code></pre></div><p>Add/remove <code>write</code> permission</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># let us remove write permission from user on hello.sh</span>
$ chmod u-w bin/hello.sh
$ ls -l bin/
-r-xr--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">19</span> Jul <span style="color:#bd93f9">29</span> 03:49 hello.sh

<span style="color:#6272a4"># add some text to hello.sh</span>
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#39;echo -n &#34;Date: &#34;&#39;</span> &gt;&gt; bin/hello.sh
-bash: bin/hello.sh: Permission denied

<span style="color:#6272a4"># put write permission back, add execute to others and group</span>
<span style="color:#6272a4"># chmod: allows multiple set of permission settings</span>
$ ls -l bin/hello.sh
-r-xr--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">19</span> Jul <span style="color:#bd93f9">29</span> 03:49 bin/hello.sh

$ chmod u+w,o<span style="color:#ff79c6">=</span>rx,g+x bin/hello.sh

$ ls -l bin/hello.sh 
-rwxr-xr-x <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">19</span> Jul <span style="color:#bd93f9">29</span> 03:49 bin/hello.sh

<span style="color:#6272a4"># Let us try writing to hello.sh</span>
$ ./bin/hello.sh
Hello World

$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#39;echo -n &#34;Date: &#34;&#39;</span> &gt;&gt; bin/hello.sh
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#39;date&#39;</span> &gt;&gt; bin/hello.sh
$ ./bin/hello.sh
Hello World
Date: Thu <span style="color:#bd93f9">29</span> Jul <span style="color:#bd93f9">2021</span> 04:02:42 AM UTC
</code></pre></div><p>Add/Remove read permission</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls -l bin/hello.py
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">57</span> Jul <span style="color:#bd93f9">29</span> 04:14 bin/hello.py
$ cat bin/hello.py
print<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Hello World&#34;</span><span style="color:#ff79c6">)</span>

$ python3 bin/hello.py
Hello World

<span style="color:#6272a4"># remove read from user</span>
$ chmod u-r bin/hello.py
$ ls -l bin/hello.py
--wxr--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">57</span> Jul <span style="color:#bd93f9">29</span> 04:14 bin/hello.py
$ cat bin/hello.py
cat: bin/hello.py: Permission denied

<span style="color:#6272a4"># add read back to user</span>
$ chmod u+r bin/hello.py
$ cat bin/hello.py
print<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Hello World&#34;</span><span style="color:#ff79c6">)</span>
</code></pre></div><p><strong><code>chmod</code> with octal representation</strong></p>
<p>The <strong>octal</strong> representation has a simpler syntax compared to <code>chmod</code> with symbols. It accepts 3 octal numbers; <code>0777</code> for example and assigns corresponding permission combination to user, group and others. Existing permission will be discarded and the new permission will be set for user, group and other at the same time.</p>
<blockquote>
<p>The first, second and third octal numbers represent user, group and others respectively.</p>
</blockquote>
<p>Here are some examples</p>
<table>
<thead>
<tr>
<th>Octal</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0777</code></td>
<td>set read, write and execute permission to all (user, group and others)</td>
</tr>
<tr>
<td><code>0644</code></td>
<td>set read and write permission to user and read-only to group and others</td>
</tr>
<tr>
<td><code>0750</code></td>
<td>set all permission to user, no permission to others and read-write to group</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># user has all permissions, group and others read-only</span>
$ ls -l bin/hello.py
-rwxr--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">57</span> Jul <span style="color:#bd93f9">29</span> 04:14 bin/hello.py

<span style="color:#6272a4"># user: all, group: read and execute, others: none</span>
$ chmod <span style="color:#bd93f9">0750</span> bin/hello.py
$ ls -l bin/hello.py
-rwxr-x--- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">57</span> Jul <span style="color:#bd93f9">29</span> 04:14 bin/hello.py
</code></pre></div><h3 id="id-view-user-info"><code>id</code>: view user info</h3>
<p>The <code>id</code> command is used to get information about the current user or any userid passed as argument. Using this command, we can get</p>
<ol>
<li>userid and effective user id (numeric value)</li>
<li>default group name and group id (numeric)</li>
<li>other groups the user belong to.</li>
</ol>
<p>When the user creates a file or directory, the userid and the default group will be used by default. We can change the ownership using the <code>chown</code> command and one of the groups instead of the default group using the <code>chgrp</code> command.</p>
<p>**<code>id</code>: current user info</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># user mbose has only one group</span>
$ id
<span style="color:#8be9fd;font-style:italic">uid</span><span style="color:#ff79c6">=</span>1001<span style="color:#ff79c6">(</span>mbose<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">gid</span><span style="color:#ff79c6">=</span>1002<span style="color:#ff79c6">(</span>mbose<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">groups</span><span style="color:#ff79c6">=</span>1002<span style="color:#ff79c6">(</span>mbose<span style="color:#ff79c6">)</span>
</code></pre></div><p><strong><code>id</code>: another user info</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># user mktutes is associated with 4 groups</span>
$ id  mktutes
<span style="color:#8be9fd;font-style:italic">uid</span><span style="color:#ff79c6">=</span>1000<span style="color:#ff79c6">(</span>mktutes<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">gid</span><span style="color:#ff79c6">=</span>1001<span style="color:#ff79c6">(</span>mktutes<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">groups</span><span style="color:#ff79c6">=</span>1001<span style="color:#ff79c6">(</span>mktutes<span style="color:#ff79c6">)</span>,4<span style="color:#ff79c6">(</span>adm<span style="color:#ff79c6">)</span>,27<span style="color:#ff79c6">(</span>sudo<span style="color:#ff79c6">)</span>,999<span style="color:#ff79c6">(</span>docker<span style="color:#ff79c6">)</span>
</code></pre></div><h3 id="groups-view-group-info-of-an-user"><code>groups</code>: view group info of an user**</h3>
<p>The <code>groups</code> command provides a simplified input compared to the <code>id</code> command. It just lists the list of groups associated with the current user, if no argument is provided or lists the groups of another user passed as argument</p>
<p><strong><code>groups</code>: current user</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$USER</span>
hradmin
$ groups
admin all 
</code></pre></div><p><strong><code>groups USERID</code>: another user</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># user mktutes has 4 groups</span>
$ groups mktutes
mktutes : mktutes adm sudo docker
</code></pre></div><h3 id="chown-change-ownership-associated-with-file"><code>chown</code>: change ownership associated with file</h3>
<p>The <code>chown</code> command is used to change the ownership of a file or set of files. Only the owner or the super-user can make this change.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">pwd</span>
/home/mktutes/trng/linux/07_perm/data/mbose

<span style="color:#6272a4"># super-user</span>
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$USER</span>
mktutes

<span style="color:#6272a4"># sample files</span>
$ ls -l
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">0</span> Jul <span style="color:#bd93f9">29</span> 15:49 sample.csv
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">0</span> Jul <span style="color:#bd93f9">29</span> 15:49 sample.log
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes <span style="color:#bd93f9">0</span> Jul <span style="color:#bd93f9">29</span> 15:49 sample.txt

<span style="color:#6272a4"># chown as super-user, new owner is mbose</span>
$ sudo chown -v mbose sample.*
changed ownership of <span style="color:#f1fa8c">&#39;sample.csv&#39;</span> from mktutes to mbose
changed ownership of <span style="color:#f1fa8c">&#39;sample.log&#39;</span> from mktutes to mbose
changed ownership of <span style="color:#f1fa8c">&#39;sample.txt&#39;</span> from mktutes to mbose

$ ls -l
-rw-r--r-- <span style="color:#bd93f9">1</span> mbose mktutes <span style="color:#bd93f9">0</span> Jul <span style="color:#bd93f9">29</span> 15:49 sample.csv
-rw-r--r-- <span style="color:#bd93f9">1</span> mbose mktutes <span style="color:#bd93f9">0</span> Jul <span style="color:#bd93f9">29</span> 15:49 sample.log
-rw-r--r-- <span style="color:#bd93f9">1</span> mbose mktutes <span style="color:#bd93f9">0</span> Jul <span style="color:#bd93f9">29</span> 15:49 sample.txt
</code></pre></div><h3 id="chgrp-change-group-associated-with-file"><code>chgrp</code>: change group associated with file</h3>
<p>The <code>chgrp</code> command is used to change the group associated with a file or set of files. Only the owner or the super-user can make this change.</p>
<p>In the previous section, we changed the owner of the files using <code>chown</code>. Let us check the groups that the new owner belongs to and change the group of these files.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ id mbose
<span style="color:#8be9fd;font-style:italic">uid</span><span style="color:#ff79c6">=</span>1001<span style="color:#ff79c6">(</span>mbose<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">gid</span><span style="color:#ff79c6">=</span>1003<span style="color:#ff79c6">(</span>dev<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">groups</span><span style="color:#ff79c6">=</span>1003<span style="color:#ff79c6">(</span>dev<span style="color:#ff79c6">)</span>,4<span style="color:#ff79c6">(</span>adm<span style="color:#ff79c6">)</span>,999<span style="color:#ff79c6">(</span>docker<span style="color:#ff79c6">)</span>,1004<span style="color:#ff79c6">(</span>all<span style="color:#ff79c6">)</span>

<span style="color:#6272a4"># chgrp: let us change the group of sample.* files</span>
<span style="color:#6272a4"># existing group: mktutes</span>
<span style="color:#6272a4"># new group: all</span>
$ sudo chgrp -v all sample.*
changed group of <span style="color:#f1fa8c">&#39;sample.csv&#39;</span> from mktutes to all
changed group of <span style="color:#f1fa8c">&#39;sample.log&#39;</span> from mktutes to all
changed group of <span style="color:#f1fa8c">&#39;sample.txt&#39;</span> from mktutes to all

$ ls -l sample.*
-rw-r--r-- <span style="color:#bd93f9">1</span> mbose all <span style="color:#bd93f9">0</span> Jul <span style="color:#bd93f9">29</span> 15:49 sample.csv
-rw-r--r-- <span style="color:#bd93f9">1</span> mbose all <span style="color:#bd93f9">0</span> Jul <span style="color:#bd93f9">29</span> 15:49 sample.log
-rw-r--r-- <span style="color:#bd93f9">1</span> mbose all <span style="color:#bd93f9">0</span> Jul <span style="color:#bd93f9">29</span> 15:49 sample.txt
</code></pre></div><h3 id="passwd-change-password"><code>passwd</code>: change password</h3>
<p>The <code>passwd</code> command is used to change or reset the password. <strong>Regular users</strong> can run this command without any argument to reset their password. The <strong>super-user</strong> can reset the password for other users by passing the <strong>userid</strong> as argument</p>
<p><strong>Change Password: Success</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$USER</span>
mbose

<span style="color:#6272a4"># enter current and new password</span>
$ passwd
Changing password <span style="color:#ff79c6">for</span> mbose.
Current password:
New password:
Retype new password:
passwd: password updated successfully
</code></pre></div><p><strong>Invalid current password: ABORT</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ passwd
Changing password <span style="color:#ff79c6">for</span> mbose.
Current password:
passwd: Authentication token manipulation error
passwd: password unchanged
</code></pre></div><p><strong>Retype new password: Mismatch</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ passwd
Changing password <span style="color:#ff79c6">for</span> mbose.
Current password:
New password:
Retype new password:
Sorry, passwords <span style="color:#ff79c6">do</span> not match.
passwd: Authentication token manipulation error
passwd: password unchanged
</code></pre></div><p><strong>Reset password as super-user using the <code>sudo</code> command</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo passwd mbose
New password:
Retype new password:
passwd: password updated successfully
</code></pre></div><h2 id="create-users-and-groups">Create Users and Groups</h2>
<p><strong>Caution</strong>:</p>
<blockquote>
<p>The below commands are for demo only. If you are <strong>root</strong> user or have <strong>super-user</strong> privilege on a <strong>Linux Server</strong>, you can try these commands.
DO NOT TRY this on your Linux Desktop.
The <strong>sudo</strong> and <strong>su</strong> commands should be treated with caution.</p>
</blockquote>
<p><strong>Setup Users and Groups</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># sudo: run commands as super-user and create home dirs for users</span>
$ sudo mkdir sysadmin dbadmin itadmin mbose sholmes

<span style="color:#6272a4"># create groups</span>
$ sudo groupadd admin
$ sudo groupadd dev
$ sudo groupadd all

<span style="color:#6272a4"># create users</span>
$ sudo useradd sysadmin -d /home/sysadmin -g admin -G all
$ sudo useradd dbadmin -d /home/dbadmin -g admin -G all
$ sudo useradd itadmin -d /home/itadmin -g admin -G all
$ sudo useradd mbose -d /home/mbose -g dev -G all
$ sudo useradd sholmes -d /home/sholmes -g dev -G all
</code></pre></div>


<footer class="footline">
    
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        
        
            
                <a class="nav nav-prev" href="/part-1/p1-ch3b/" title="1.4: File System: Wildcards"><i class="fa fa-chevron-left"></i></a>
            
            
                <a class="nav nav-next" href="/part-1/p1-ch5/" title="1.6: IO Redirection"><i class="fa fa-chevron-right"></i></a>
            
        
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1632053186"></script>
    <script src="/js/perfect-scrollbar.min.js?1632053186"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1632053186"></script>
    <script src="/js/jquery.sticky.js?1632053186"></script>
    <script src="/js/jquery.svg.pan.zoom.js?1632053186"></script>
    <script src="/js/featherlight.min.js?1632053186"></script>
    <script src="/js/modernizr.custom-3.6.0.js?1632053186"></script>
    
        
            <script src="/js/mermaid.min.js?1632053186"></script>
        
        
            
        
        <script>
            if (mermaid) {
                mermaid.mermaidAPI.initialize( Object.assign( { "securityLevel": "antiscript" }, JSON.parse("{ \"startOnLoad\": true }"), { startOnLoad: false } ) );
            }
        </script>
    
    <script src="/js/relearn.js?1632053186"></script>
    

  </body>
</html>

