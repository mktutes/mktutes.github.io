<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.83.1" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>1.8: Data Manipulation :: My New Hugo Site</title>

    
    <link href="/css/nucleus.css?1632053186" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1632053186" rel="stylesheet">
    <link href="/css/featherlight.min.css?1632053186" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1632053186" rel="stylesheet">
    <link href="/css/auto-complete.css?1632053186" rel="stylesheet">
    <link href="/css/theme.css?1632053186" rel="stylesheet">
    <link href="/css/tabs.css?1632053186" rel="stylesheet">
    <link href="/css/hugo-theme.css?1632053186" rel="stylesheet">
    
    <link href="/css/theme-blue.css?1632053186" rel="stylesheet">
    
    

    <script src="/js/jquery.min.js?1632053186"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/part-1/p1-ch7/">
    <nav id="sidebar" class="">
  
  
  <div id="header-wrapper">
    <div id="header">
      <a id="logo"
  style="
    color: white;
    font-family: 'Novacento Sans Wide', 'Helvetica', 'Tahoma', 'Geneva', 'Arial', sans-serif;
    font-size: 30px;
    font-weight: bold;
    margin-top: -2px;
  "
  href="/">
  <b style="font-size: 120%;">MK</b> &nbsp; <i class="fab fa-linux"></i> &nbsp; Linux  
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1632053186"></script>
<script type="text/javascript" src="/js/auto-complete.js?1632053186"></script>
<script type="text/javascript">
    
    
    var index_url="/index.json";
    var root_url="/";
    var baseUri=root_url.replace(/\/$/, '');
</script>
<script type="text/javascript" src="/js/search.js?1632053186"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href="/"><i class="fas fa-home"></i> Home</a>
        </li>
      </ul>
    </section>
  

  <div class="highlightable">
    <ul class="topics">
      
        
        





  
		
    
      
      
      <li data-nav-id="/part-0/" title="Setting the Stage" class="dd-item">
        <a href="/part-0/">
          <b>0. </b>
Setting the Stage

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-0/p0-ch1/" title="Acknowledgement" class="dd-item">
        <a href="/part-0/p0-ch1/">
          
Acknowledgement

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/part-1/" title="Getting Started" class="dd-item parent">
        <a href="/part-1/">
          <b>1. </b>
Getting Started

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch1/" title="1.1: Introduction" class="dd-item">
        <a href="/part-1/p1-ch1/">
          
1.1: Introduction

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch2/" title="1.2: Command Syntax" class="dd-item">
        <a href="/part-1/p1-ch2/">
          
Command Syntax

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch3a/" title="1.3: File System: Basics" class="dd-item">
        <a href="/part-1/p1-ch3a/">
          
1.3: File System: Basics

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch3b/" title="1.4: File System: Wildcards" class="dd-item">
        <a href="/part-1/p1-ch3b/">
          
1.4: File System: Wildcards

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch4/" title="1.5: Permission" class="dd-item">
        <a href="/part-1/p1-ch4/">
          
1.5: Permission

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch5/" title="1.6: IO Redirection" class="dd-item">
        <a href="/part-1/p1-ch5/">
          
1.6: IO Redirection

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch6/" title="1.7: Viewing Files" class="dd-item">
        <a href="/part-1/p1-ch6/">
          
1.7: Viewing Files

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch7/" title="1.8: Data Manipulation" class="dd-item active">
        <a href="/part-1/p1-ch7/">
          
1.8: Data Manipulation

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-1/p1-ch8/" title="1.9: Running Commands" class="dd-item">
        <a href="/part-1/p1-ch8/">
          
1.9: Running Commands

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/part-2/" title="Text Processing" class="dd-item">
        <a href="/part-2/">
          <b>2. </b>
Text Processing

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-2/p2-ch1/" title="2.1: Regular Expressions" class="dd-item">
        <a href="/part-2/p2-ch1/">
          
2.1: Regular Expressions

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-2/p2-ch2/" title="2.2: Vi Editor" class="dd-item">
        <a href="/part-2/p2-ch2/">
          
2.2: Vi Editor

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-2/p2-ch3/" title="2.3: Searching Text" class="dd-item">
        <a href="/part-2/p2-ch3/">
          
2.3: Searching Text

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-2/p2-ch4/" title="2.4: Text Substitution" class="dd-item">
        <a href="/part-2/p2-ch4/">
          
2.4: Text Substitution

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-2/p2-ch5/" title="2.4: AWK programming Language" class="dd-item">
        <a href="/part-2/p2-ch5/">
          
2.4: AWK programming Language

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/part-3/" title="Beyond the Basics" class="dd-item">
        <a href="/part-3/">
          <b>3. </b>
Beyond the Basics

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch1/" title="3.1: Process Management" class="dd-item">
        <a href="/part-3/p3-ch1/">
          
3.1: Process Management

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch2/" title="3.2: Scheduling Jobs" class="dd-item">
        <a href="/part-3/p3-ch2/">
          
3.2: Scheduling Jobs

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch4/" title="3.3: Remote Access Commands" class="dd-item">
        <a href="/part-3/p3-ch4/">
          
3.3: Remote Access Commands

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch3/" title="3.4: Archival commands" class="dd-item">
        <a href="/part-3/p3-ch3/">
          
3.4: Archival commands

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch5/" title="3.5: The &#34;find&#34; Command" class="dd-item">
        <a href="/part-3/p3-ch5/">
          
3.5: The &#34;find&#34; Command

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-3/p3-ch6/" title="3.6: The &#34;xargs&#34; Command" class="dd-item">
        <a href="/part-3/p3-ch6/">
          
3.6: The &#34;xargs&#34; Command

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/part-4/" title="Shell Scripting" class="dd-item">
        <a href="/part-4/">
          <b>4. </b>
Shell Scripting

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-4/p4-ch1/" title="4.1: Introduction to Shell Scripts" class="dd-item">
        <a href="/part-4/p4-ch1/">
          
4.1: Introduction to Shell Scripts

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/part-5/" title="Appendix" class="dd-item">
        <a href="/part-5/">
          <b>9. </b>
Appendix

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/part-5/p5-ch1/" title="Commands Summary" class="dd-item">
        <a href="/part-5/p5-ch1/">
          
Commands Summary

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/part-5/p5-ch2/" title="Special Characters" class="dd-item">
        <a href="/part-5/p5-ch2/">
          
Special Characters

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
      
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
            <li>
                <a class="padding" href="http://example.org/tags"><i class='fas fa-tags'></i> Tags</a>
            </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Linux Basics</a> > <a href='/part-1/'>Getting Started</a> > 1.8: Data Manipulation
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#sample-files">Sample Files</a></li>
      </ul>
    </li>
    <li><a href="#command-list-data-manipulation">Command List: Data Manipulation</a>
      <ul>
        <li><a href="#cut--create-slices-from-each-record"><code>cut</code> : create slices from each record</a></li>
        <li><a href="#paste--merge-multiple-files"><code>paste</code> : merge multiple files</a></li>
        <li><a href="#split-split-a-file-into-pieces-by-size-or-record-count"><code>split</code>: split a file into pieces by size or record count</a></li>
        <li><a href="#join-merge-two-sorted-files-using-a-key"><code>join</code>: merge two sorted files using a key</a></li>
        <li><a href="#sort-sort-a-file"><code>sort</code>: sort a file</a></li>
        <li><a href="#uniq-get-unique-values-counts-from-sorted-data"><code>uniq</code>: get unique values, counts from &ldquo;sorted&rdquo; data</a></li>
        <li><a href="#tr-substitute-delete-or-squeeze-characters"><code>tr</code>: substitute, delete or squeeze characters</a></li>
        <li><a href="#column-format-data-in-tabular-form"><code>column</code>: format data in tabular form</a></li>
        <li><a href="#colrm-remove-columns-from-file-and-print"><code>colrm</code>: remove columns from file and print</a></li>
        <li><a href="#cmp-compare-two-files-byte-by-byte"><code>cmp</code>: compare two files byte by byte</a></li>
        <li><a href="#diff-compare-files-line-by-line"><code>diff</code>: compare files line by line</a></li>
        <li><a href="#comm-compare-2-sorted-files-side-by-side"><code>comm</code>: compare 2 sorted files side-by-side</a></li>
        <li><a href="#comparison-using-file-checksum">Comparison using file <code>checksum</code></a></li>
        <li><a href="#shuf-shuffle-records--arguments"><code>shuf</code>: shuffle records / arguments</a></li>
        <li><a href="#use-case">Use Case</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              1.8: Data Manipulation
            </h1>
          

        


<h3 id="introduction">Introduction</h3>
<p>In this chapter, let us discuss ways to manipulate the data from files; operations such as sort, slice, join, reformat, aggregation. etc.. I have originally named this chapter as <em>File Manipulation Commands</em>, however none of the commands discussed here actually change the input file, these commands just manipulate the contents and display the output in <strong>stdout</strong> that can be <strong>redirected</strong> into a file.</p>
<p>This subset of commands are one of the most frequently used commands and gaining expertise using these commands will be really beneficial to developers, testers and anyone who work with files. Along with the <strong>commands</strong> used for <strong>viewing files</strong>, <strong>IO Redirection</strong> and these <strong>data manipulation</strong> commands, we can craft <strong>command pipelines</strong> to extract, reformat and store data in files without writing complex programs.</p>
<h3 id="sample-files">Sample Files</h3>
<p>In order to explore the commands, we will use the following 2 files; a fixed format file and a delimited file with same data. Feel free to use these or your own samples with the commands and options specified. A <code>python</code> script to create these files are available at the end of the chapter. In addition to these two files, we will also use few smaller files and the contents of these files will be displayed before being used in the demo.</p>
<p><strong>student.csv</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">studentId,LastName,FirstName,DOB,grade,subject,score,endOfRec
S00001,Carlson,Crystal,SOCS,15-May-2013,3,98,Z
S00002,Brennan,Angel,MATH,21-Feb-2013,3,74,Z
...
...
S00004,Brooks,Jillian,MATH,10-Dec-2010,6,62,Z
</code></pre></div><p><strong>student.txt</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">S00001 Carlson    Crystal    15-May-2013 SOCS <span style="color:#bd93f9">03</span>  <span style="color:#bd93f9">98</span> Z
S00002 Brennan    Angel      21-Feb-2013 MATH <span style="color:#bd93f9">03</span>  <span style="color:#bd93f9">74</span> Z
...
...
S00004 Brooks     Jillian    10-Dec-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">62</span> Z
</code></pre></div><h2 id="command-list-data-manipulation">Command List: Data Manipulation</h2>
<table>
<thead>
<tr>
<th>#</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>cut</code></td>
<td>create slices from each record</td>
</tr>
<tr>
<td>2</td>
<td><code>paste</code></td>
<td>merge multiple lines from a file into single line or merge multiple files line by line</td>
</tr>
<tr>
<td>3</td>
<td><code>split</code></td>
<td>split a file into smaller chunks. By default, each split file contains 1000 lines, we can use options to split by different line count or split by bytes size</td>
</tr>
<tr>
<td>4</td>
<td><code>join</code></td>
<td>merge already <strong>sorted</strong> files by keys, By default it performs an <strong>inner</strong> or <strong>equality</strong> join, only display records with matching keys</td>
</tr>
<tr>
<td>5</td>
<td><code>sort</code></td>
<td>sort files, a rich set of options are available</td>
</tr>
<tr>
<td>6</td>
<td><code>uniq</code></td>
<td>create unique records from an already <strong>sorted</strong> file</td>
</tr>
<tr>
<td>7</td>
<td><code>tr</code></td>
<td>simple translation and deletion of characters</td>
</tr>
<tr>
<td>8</td>
<td><code>column</code></td>
<td>display file in tabular format</td>
</tr>
<tr>
<td>9</td>
<td><code>colrm</code></td>
<td>remove columns from a file</td>
</tr>
<tr>
<td>10</td>
<td><code>cmp</code></td>
<td>compare two files byte by byte and display summary, from which byte/line there is a difference. We can limit the number of bytes to be compared</td>
</tr>
<tr>
<td>11</td>
<td><code>diff</code></td>
<td>compare two <strong>sorted</strong> files and display the records that are different</td>
</tr>
<tr>
<td>12</td>
<td><code>comm</code></td>
<td>compare two <strong>sorted</strong> files and display the unique records from file 1, file 2 and matched records in 3 columns. This command is useful to compare files with shorter records</td>
</tr>
<tr>
<td>13</td>
<td><code>cksum</code></td>
<td>create a checksum and byte count of a given file</td>
</tr>
<tr>
<td>14</td>
<td><code>md5sum</code></td>
<td>create a checksum using MD5 digest algorithm</td>
</tr>
<tr>
<td>15</td>
<td><code>shasum</code></td>
<td>create a checksum using <strong>SHA</strong> aka <strong>Secure Hash Algorithm</strong></td>
</tr>
<tr>
<td>16</td>
<td><code>shuf</code></td>
<td>shuffle records from file</td>
</tr>
</tbody>
</table>
<h3 id="cut--create-slices-from-each-record"><code>cut</code> : create slices from each record</h3>
<p>The <code>cut</code> command is used to extract portions of reach record to create a subset of a given file. The subset of records can be created providing column range: <code>col 1-10,25-30,50-end</code> or by fields numbers if we have a delimited file.</p>
<p>Another use of the <code>cut</code> command is to convert a delimited file from one-delimiter to another. for example CSV to pipe-delimited file.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-c</code></td>
<td>column positions to extract</td>
</tr>
<tr>
<td><code>-d CH</code></td>
<td>delimiter to be used; <code>CH</code> should be a single character. used along with <code>-f</code>. default is <code>TAB</code></td>
</tr>
<tr>
<td><code>-f</code></td>
<td>fields to extract;  works with <code>-d</code> for option</td>
</tr>
<tr>
<td><code>-s</code></td>
<td>skip lines if that does not have delimiters. works with <code>-d</code> option</td>
</tr>
<tr>
<td><code>--complement</code></td>
<td>select columns/fields that are not mentioned in <code>-c</code> or <code>-f</code> options</td>
</tr>
<tr>
<td><code>--output-delim</code></td>
<td>use a different delimiter on output records. By default, input delimiter is used</td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>: While using <code>-f</code> or <code>-c</code>, we need to provide the individual column positions or field numbers or range or a combination of both. We can use the following conventions</p>
<ul>
<li><code>m-n</code> : column or field from <code>m</code> to <code>n</code></li>
<li><code>m,n</code> : column or field <code>m</code> and <code>n</code></li>
<li><code>m-</code>  : from <code>m</code> till end of the record</li>
</ul>
<p><strong>Examples</strong></p>
<ul>
<li><code>-c1-10,25</code> : columns 1 to 10 and column 25 (11 bytes)</li>
<li><code>-d, -f1-5,10</code> : fields 1 to 5 and field 10 in a comma-delimited record</li>
<li><code>-c1-10,25,30,40-45,50-</code>: columns 1 to 10, 25, 30, 40 to 45 and 50 till end of record</li>
<li><code>-d, -f1,5,11-15,30-</code>: fields 1, 5, 10 to 15 and from field 30 to the last field in a comma-delimited record</li>
</ul>
<p><strong>extract last and first names from student.txt</strong></p>
<p>The data is in fixed format, each field start at the same column position. Each field has a space in between and each student has 3 records; one per subject - MATH, SCIE and SOCS.</p>
<ul>
<li>last name: column 8 to 17, 10 bytes long</li>
<li>first name: column 19 to 28, 10 bytes long</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># sample data</span>
$ head -2 student.txt
S00001 Kim        Ivan       19-Nov-2012 MATH <span style="color:#bd93f9">04</span>  <span style="color:#bd93f9">99</span> Z
S00001 Kim        Ivan       19-Nov-2012 SCIE <span style="color:#bd93f9">04</span>  <span style="color:#bd93f9">99</span> Z
S00002 Pena       Bryan      07-Jun-2013 MATH <span style="color:#bd93f9">03</span>  <span style="color:#bd93f9">57</span> Z

$ cut -c8-17,19-28 student.txt
Kim       Ivan
Kim       Ivan
Pena      Bryan
...
...
Rosario   Emily
</code></pre></div><p><strong>extract last and first names from student.csv</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># sample data</span>
$ head -3 student.csv
Id,LastName,FirstName,DOB,grade,subject,score,En
S00001,Kim,Ivan,MATH,19-Nov-2012,04,99,Z
S00001,Kim,Ivan,SCIE,19-Nov-2012,04,99,Z

<span style="color:#6272a4"># delimiter is comma, get fields 2 and 3</span>
$ cut -d, -f2,3 student.csv
LastName,FirstName
Kim,Ivan
Kim,Ivan
...
...
Rosario,Emily
</code></pre></div><p><strong>extract fields other than first and last name</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># --complement: get fields other than listed in &#39;-c&#39; of &#39;-f&#39;</span>
$ cut -d, -f2,3 --complement student.csv 
Id,DOB,grade,subject,score,En
S00001,MATH,19-Nov-2012,04,99,Z
S00001,SCIE,19-Nov-2012,04,99,Z
...
...
S00003,SOCS,21-Apr-2010,06,57,Z
</code></pre></div><p><strong>convert CSV to pipe-delimited file</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># -f1-: select all fields</span>
<span style="color:#6272a4"># --output-delim=&#39;|&#39; : set separate output delimiter </span>
$ cut -d, -f1- --output-delim<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;|&#39;</span> student.csv
Id|LastName|FirstName|DOB|grade|subject|score|En
S00001|Kim|Ivan|MATH|19-Nov-2012|04|99|Z
S00001|Kim|Ivan|SCIE|19-Nov-2012|04|99|Z
S00001|Kim|Ivan|SOCS|19-Nov-2012|04|75|Z
...
...
S00030|Dewey|Jack|SOCS|21-Apr-2010|06|57|Z
</code></pre></div><p><strong>convert CSV to TAB delimited file</strong></p>
<p>The <code>TAB</code> as output-delimiter works slightly different than any other single-character delimiter. we need to use <code>--output-delim-$'\t'</code> instead of just <code>\t</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># let us skip header </span>
$ tail -n +2 student.csv | cut -d, -f1-  --output-delim<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">$&#39;\t&#39;</span>  
S00001  Kim     Ivan    MATH    19-Nov-2012     <span style="color:#bd93f9">04</span>      <span style="color:#bd93f9">99</span>      Z
...
...
S00003  Rosario Emily   SOCS    21-Apr-2010     <span style="color:#bd93f9">06</span>      <span style="color:#bd93f9">57</span>      Z
</code></pre></div><p><strong>skip records that does not have delimiters</strong></p>
<p>Some delimited files will have blank lines at the end along with summary of record count, exported from database tables for example. we can skip the blank records and the summary record using the <code>-s</code> option.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ head student.csv
Id,LastName,FirstName,DOB,grade,subject,score,En
S00001,Kim,Ivan,MATH,19-Nov-2012,04,99,Z
...
...
S00100,Newton,Charles,SOCS,26-Jun-2012,04,92,Z

<span style="color:#bd93f9">300</span> record<span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)</span> exported from STUDENT table
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># last 3 records discarded, remove `-s` and try this command</span>
$ cut -d, -f1- -s student.csv
Id,LastName,FirstName,DOB,grade,subject,score,En
S00001,Kim,Ivan,MATH,19-Nov-2012,04,99,Z
S00001,Kim,Ivan,SCIE,19-Nov-2012,04,99,Z
...
...
S00100,Newton,Charles,SOCS,26-Jun-2012,04,92,Z
</code></pre></div><p><strong>Note</strong>:</p>
<p>There might be situations where we need to slice and rearrange columns or fields. The <code>cut</code> command is suitable <strong>only for slicing</strong> and <strong>does not support rearranging</strong> columns or fields. We will look into this using another command called <code>awk</code> in the future.</p>
<h3 id="paste--merge-multiple-files"><code>paste</code> : merge multiple files</h3>
<p>The <code>paste</code> command typically reads one record from each file, passed as argument and merge the records with a space delimiter and create a single record. If any of these files have less records compared to the other an empty-string is substituted in place.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-d CH</code></td>
<td>output delimiter, default is TAB</td>
</tr>
<tr>
<td><code>-s</code></td>
<td>paste records as single record from one file at a time, like transpose</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong></p>
<p>We have 2 files <code>cmds.txt</code> that contains the commands list and <code>help.txt</code> that contains the command description. The <code>help.txt</code> has one extra record than the <code>cmds.txt</code>. Let us merge the contents of these two files.</p>
<p>**Snippet from sample files **</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat cmd.txt
<span style="color:#8be9fd;font-style:italic">echo</span>
cat
head
tail

$ cat help.txt
display argument on file
concatenate files
display first <span style="color:#bd93f9">10</span> records
display last <span style="color:#bd93f9">10</span> records
</code></pre></div><p><strong>last record has contents from help.txt only</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ paste cmd.txt help.txt
<span style="color:#8be9fd;font-style:italic">echo</span>    display argument on file
cat     concatenate files
head    display first <span style="color:#bd93f9">10</span> records
tail    display last <span style="color:#bd93f9">10</span> records
paste   merge records from files
        sort files

<span style="color:#6272a4"># using delimiter </span>
echo,display argument on file
cat,concatenate files
head,display first <span style="color:#bd93f9">10</span> records
tail,display last <span style="color:#bd93f9">10</span> records
paste,merge records from files
,sort files
</code></pre></div><p>Let us say, we have an address file with 3 lines per address and we want to merge the 3 lines into one and create one record per address. We can use <code>paste</code> to merge every 3 records from the address file into single record.</p>
<blockquote>
<p>We need to pass the data as <strong>standard input</strong> or <strong>pipe</strong> in order to perform the multiple records merge</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ head -6 address.py
Brooks, Sarah
<span style="color:#bd93f9">52848</span> Cynthia Drives
West Jason, MS <span style="color:#bd93f9">82831</span>
Byrd, Kelly
<span style="color:#bd93f9">88505</span> Castro Heights
South Vanessa, MA <span style="color:#bd93f9">96024</span>

<span style="color:#6272a4"># single line address as TAB delimited record</span>
$ head -9 address.py  | paste - - -
Brooks, Sarah   <span style="color:#bd93f9">52848</span> Cynthia Drives    West Jason, MS <span style="color:#bd93f9">82831</span>
Byrd, Kelly     <span style="color:#bd93f9">88505</span> Castro Heights    South Vanessa, MA <span style="color:#bd93f9">96024</span>

<span style="color:#6272a4"># same as above, as comma-delimited record</span>
$ head -9 address.py  | paste -d, - - -
Brooks, Sarah,52848 Cynthia Drives,West Jason, MS <span style="color:#bd93f9">82831</span>
Byrd, Kelly,88505 Castro Heights,South Vanessa, MA <span style="color:#bd93f9">96024</span>
</code></pre></div><h3 id="split-split-a-file-into-pieces-by-size-or-record-count"><code>split</code>: split a file into pieces by size or record count</h3>
<p>The <code>split</code> commands creates smaller chunks from a large file that can be concatenated together to recreate the same file, if needed. In the past, due to the storage size limitations, we may not be able to copy large files in one removable storage devices like <em>floppy</em>, <em>CD</em>,&hellip; The <code>split</code> command made such copy possible.</p>
<p>We can create smaller file chunks by specifying number of records per file, max file size or even number of chunks we want. By default, the command splits the file by creating chunks of files with <strong>1000</strong> records per file and the last file to have the left over records.</p>
<p>In addition to various split options, we can provide file prefix and suffix to be used to name the file chunks. If we do not provide static <strong>prefix</strong> or <strong>suffix</strong>, the command will use <strong>x</strong> as prefix and <strong>aa</strong>, <strong>ab</strong>, <strong>ac</strong>,.. as suffix creating file names <strong>xaa</strong>, <strong>xab</strong>, <strong>xac</strong>,..</p>
<p><strong>syntax</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ split <span style="color:#ff79c6">[</span>option<span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">)]</span> FILE <span style="color:#ff79c6">[</span>prefix<span style="color:#ff79c6">]</span>
</code></pre></div><p><strong>common options</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-b N</code></td>
<td>create chunks of <code>N</code> bytes each</td>
</tr>
<tr>
<td><code>-l N</code></td>
<td>create chunks with <code>N</code> records per file</td>
</tr>
<tr>
<td><code>-n N</code></td>
<td>create <code>N</code> files of equal size, may create empty file</td>
</tr>
<tr>
<td><code>-e</code></td>
<td>do not create empty file; used along with <code>-n</code></td>
</tr>
<tr>
<td><code>-a N</code></td>
<td>suffix length; default is 2: aa, ab, ac, &hellip;</td>
</tr>
<tr>
<td><code>-d</code></td>
<td>use numeric suffix increments instead of aa, ab,..</td>
</tr>
<tr>
<td><code>-x</code></td>
<td>use hexadecimal suffix increments instead of aa, ab, ..</td>
</tr>
</tbody>
</table>
<p><strong>other options</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--additional-suffix=</code></td>
<td>provide static suffix</td>
</tr>
<tr>
<td><code>--numeric-suffixes=</code></td>
<td>same as <code>-d</code>, allows starting value</td>
</tr>
<tr>
<td><code>--hex-suffixes=</code></td>
<td>same as <code>-d</code>, allows starting value</td>
</tr>
</tbody>
</table>
<p><strong>examples</strong></p>
<p>Let us a very large file using the <code>names_v1.txt</code> file and <code>shuf</code> command with <code>-n</code> and <code>-r</code> option. The following command created a <code>1.4GB</code> file and it may take some time to process. We will also create another file with 7550 records to demo split by record count.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ shuf -r -n <span style="color:#bd93f9">123456789</span>  names_v1.txt -o large_file_split_demo.txt

$ zip large_file_split_demo large_file_split_demo.txt

<span style="color:#6272a4"># file size: 1.4G and 73M respectively</span>
$ stat --printf<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;%n: %s\n&#34;</span> large_file_split_demo.*               
large_file_split_demo.txt: <span style="color:#bd93f9">1481481468</span>
large_file_split_demo.zip: <span style="color:#bd93f9">76052943</span>

$ head -7550  large_file_split_demo.txt &gt; split_demo.txt
$ wc -l split_demo.txt
<span style="color:#bd93f9">7550</span> split_demo.txt
</code></pre></div><p><strong>default split</strong></p>
<p>By default, the <code>split</code> command creates file chunks with <strong>1000</strong> records per file.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls
large_file_split_demo.txt  
large_file_split_demo.zip  
names_v1.txt  
split_demo.txt

<span style="color:#6272a4"># created files with &#39;x&#39; prefix and 2 byte alpha suffix</span>
$ split split_demo.txt

$ ls
large_file_split_demo.txt  names_v1.txt    xaa  xac  xae  xag
large_file_split_demo.zip  split_demo.txt  xab  xad  xaf  xah

$ wc -l split_demo.txt xaa xab xaf xah
  <span style="color:#bd93f9">7550</span> split_demo.txt
  <span style="color:#bd93f9">1000</span> xaa
  <span style="color:#bd93f9">1000</span> xab
  <span style="color:#bd93f9">1000</span> xac
  <span style="color:#bd93f9">1000</span> xad
  <span style="color:#bd93f9">1000</span> xae
  <span style="color:#bd93f9">1000</span> xaf
  <span style="color:#bd93f9">1000</span> xag
   <span style="color:#bd93f9">550</span> xah
</code></pre></div><p><strong>max records per file</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rm x*
<span style="color:#6272a4"># split -l 3000: max records per file is 3000 </span>
$ split -l <span style="color:#bd93f9">3000</span> split_demo.txt

$ ls
large_file_split_demo.txt  names_v1.txt    split_fileaa  split_fileac  xab
large_file_split_demo.zip  split_demo.txt    
xaa           xab   xac

$ wc -l xa*
 <span style="color:#bd93f9">3000</span> xaa
 <span style="color:#bd93f9">3000</span> xab
 <span style="color:#bd93f9">1550</span> xac
 <span style="color:#bd93f9">7550</span> total 
</code></pre></div><p><strong>using prefix / suffix for output files</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># pass prefix as the second argument: &#39;split_file_&#39; </span>
$ split -l <span style="color:#bd93f9">3000</span> split_demo.txt split_file_

$ wc -l split_file_*
 <span style="color:#bd93f9">3000</span> split_file_aa
 <span style="color:#bd93f9">3000</span> split_file_ab
 <span style="color:#bd93f9">1550</span> split_file_ac
 <span style="color:#bd93f9">7550</span> total
 
<span style="color:#6272a4"># add suffix</span>
$ split -l <span style="color:#bd93f9">3000</span> split_demo.txt split_file_ --additional-suffix<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;_chunk.txt&#34;</span>

$ wc -l *chunk*
 <span style="color:#bd93f9">3000</span> split_file_aa_chunk.txt
 <span style="color:#bd93f9">3000</span> split_file_ab_chunk.txt
 <span style="color:#bd93f9">1550</span> split_file_ac_chunk.txt
</code></pre></div><p><strong>split into <code>N</code> files</strong></p>
<p>We can use the <code>-n NUM</code> option to specify how may chunks we want to create.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ split -n <span style="color:#bd93f9">4</span>  split_demo.txt split_file_ --additional-suffix<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;_chunk.txt&#34;</span>
$ wc -l *chunk*
 <span style="color:#bd93f9">1887</span> split_file_aa_chunk.txt
 <span style="color:#bd93f9">1888</span> split_file_ab_chunk.txt
 <span style="color:#bd93f9">1887</span> split_file_ac_chunk.txt
 <span style="color:#bd93f9">1888</span> split_file_ad_chunk.txt
</code></pre></div><p><strong>split by size</strong></p>
<p>Let us use the <code>-b N</code> option to create files of max <code>N Bytes</code> size, We can suffix <strong>K, M, G, T</strong> to specify size in KB, MB, etc.. For this demo, we will use the <strong>73 MB zip file</strong>.</p>
<p>We will use the <code>-d N</code> to use <strong>numeric suffix</strong> instead of alphabetic and <code>-a N</code> option to provide suffix size instead of default 2 bytes. The numeric suffix starts with 0 and incremented by 1 when we use the <code>-d</code> option. If we need the suffix to start with some other number, we can use the <code>--numeric-suffixes=NNN</code> option.</p>
<p><strong>check the zip file details</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls -lh large_file_split_demo.zip
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes 73M Aug <span style="color:#bd93f9">11</span> 05:52 large_file_split_demo.zip

<span style="color:#6272a4"># zipinfo: provides info about the zipped files</span>
<span style="color:#6272a4"># like the ls -l command</span>
$ zipinfo large_file_split_demo.zip
Archive:  large_file_split_demo.zip
Zip file size: <span style="color:#bd93f9">76052943</span> bytes, number of entries: <span style="color:#bd93f9">1</span>
-rw-r--r--  3.0 unx <span style="color:#bd93f9">1481481468</span> tx defN 21-Aug-11 05:49 large_file_split_demo.txt
<span style="color:#bd93f9">1</span> file, <span style="color:#bd93f9">1481481468</span> bytes uncompressed, <span style="color:#bd93f9">76052743</span> bytes compressed:  94.9%
</code></pre></div><p><strong>split the files by 10MB chunk</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># use numeric suffix of 5 bytes long</span>
<span style="color:#6272a4"># output file prefix is &#34;num_&#34;</span>
$ split -d  -a <span style="color:#bd93f9">5</span> -b 10M large_file_split_demo.zip num_

$ ls -lh num_*
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes  10M Aug <span style="color:#bd93f9">11</span> 07:56 num_00000
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes  10M Aug <span style="color:#bd93f9">11</span> 07:56 num_00001
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes  10M Aug <span style="color:#bd93f9">11</span> 07:56 num_00002
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes  10M Aug <span style="color:#bd93f9">11</span> 07:56 num_00003
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes  10M Aug <span style="color:#bd93f9">11</span> 07:56 num_00004
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes  10M Aug <span style="color:#bd93f9">11</span> 07:56 num_00005
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes  10M Aug <span style="color:#bd93f9">11</span> 07:56 num_00006
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes 2.6M Aug <span style="color:#bd93f9">11</span> 07:56 num_00007
</code></pre></div><p><strong>concat file chunks and check the integrity of the zip file</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat num_0000* &gt; temp.zip

$ ls -lh temp.zip
-rw-r--r-- <span style="color:#bd93f9">1</span> mktutes mktutes 73M Aug <span style="color:#bd93f9">11</span> 07:59 temp.zip

$ md5sum *.zip
a6d0061a44673d9493f238850eb20c5a  large_file_split_demo.zip
a6d0061a44673d9493f238850eb20c5a  temp.zip

$ zipinfo temp.zip
Archive:  temp.zip
Zip file size: <span style="color:#bd93f9">76052943</span> bytes, number of entries: <span style="color:#bd93f9">1</span>
-rw-r--r--  3.0 unx <span style="color:#bd93f9">1481481468</span> tx defN 21-Aug-11 05:49 large_file_split_demo.txt
<span style="color:#bd93f9">1</span> file, <span style="color:#bd93f9">1481481468</span> bytes uncompressed, <span style="color:#bd93f9">76052743</span> bytes compressed:  94.9%
</code></pre></div><h3 id="join-merge-two-sorted-files-using-a-key"><code>join</code>: merge two sorted files using a key</h3>
<p>The <code>join</code> command merges two lexically sorted by a common field. By default, it merges the matched records from both files. We can also write unmatched records from one or both files using additional options. By default, the output will have the <strong>join key</strong> followed by remaining fields from FILE1 and then FILE2.</p>
<p>The command uses <strong>space</strong> as default field delimiter and considers the <strong>first field</strong> as a key for comparison. We can override the delimiter and specify different field numbers as comparison key.</p>
<p>The <code>join</code> command works similar to the <strong>JOIN</strong> operation of <strong>SQL queries</strong>. However it only uses a single field for matching.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a 1</code></td>
<td>print unmatched key and data from FILE1; <strong>left outer join</strong></td>
</tr>
<tr>
<td><code>-a 2</code></td>
<td>print unmatched key and data from FILE2; <strong>right outer join</strong></td>
</tr>
<tr>
<td></td>
<td><code>-a 1 -a 2</code> : prints unmatched records from both files; <strong>full outer join</strong></td>
</tr>
<tr>
<td><code>-v 1</code></td>
<td>suppress matched records from <code>FILE 1</code></td>
</tr>
<tr>
<td><code>-v 2</code></td>
<td>suppress matched records from <code>FILE 2</code></td>
</tr>
<tr>
<td></td>
<td><code>-v 1 -v 2</code>: suppress matched records from both files</td>
</tr>
<tr>
<td><code>-t</code></td>
<td><code>-t CH</code>:use <code>CH</code> as input field delimiter instead of <code>space</code></td>
</tr>
<tr>
<td><code>-i</code></td>
<td>ignore case while comparing fields; <code>sort</code> using <code>-f</code> option</td>
</tr>
<tr>
<td><code>-j N</code></td>
<td>use <code>FIELD N</code> from <code>FILE 1 and 2</code> for comparison instead of first field</td>
</tr>
<tr>
<td><code>-1 N</code></td>
<td>use <code>FIELD N</code> from <code>FILE 1</code> for comparison</td>
</tr>
<tr>
<td><code>-2 N</code></td>
<td>use <code>FIELD N</code> from <code>FILE 2</code> for comparison</td>
</tr>
<tr>
<td><code>-e STR</code></td>
<td>print <code>STR</code> against missing values</td>
</tr>
<tr>
<td></td>
<td>we need to use <code>-o auto</code> along with <code>-a</code> and <code>-e</code></td>
</tr>
<tr>
<td><code>-o FMT</code></td>
<td>override default merge order</td>
</tr>
<tr>
<td></td>
<td><code>-o 0</code> to display on the keys. <code>-o 1.2 2.2</code> to display individual fields</td>
</tr>
<tr>
<td></td>
<td>use <code>FILENUM.FIELDNUM,...</code> to rearrange fields</td>
</tr>
<tr>
<td><code>--header</code></td>
<td>treat first line as header</td>
</tr>
</tbody>
</table>
<p><strong>sample files</strong></p>
<p>For this demo, let us create two files with numbers in ascending order as first field. The roman numeral and numbers spelling as second fields on file one and two respectively. These files are named <code>roman.txt</code> and <code>english.txt</code>.</p>
<p>We will use <code>--header</code> option to treat the first record from both files as <strong>header</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat roman.txt
NBR Roman
<span style="color:#bd93f9">1</span> I
<span style="color:#bd93f9">2</span> II
<span style="color:#bd93f9">3</span> III
<span style="color:#bd93f9">4</span> IV
<span style="color:#bd93f9">5</span> V

$ cat english.txt
NUM Text
<span style="color:#bd93f9">0</span> Zero
<span style="color:#bd93f9">1</span> One
<span style="color:#bd93f9">2</span> Two
<span style="color:#bd93f9">3</span> Three
<span style="color:#bd93f9">4</span> Four
</code></pre></div><p><strong>inner join: also known as natural join (default)</strong></p>
<p>The <code>join</code> command without any options merges the two files using first field delimited by spaces and output the matched records from both files. The unmatched records from both files will be skipped. In this example, last record; <code>5 V</code> from <code>roman.txt</code> and first record; <code>0 Zero</code> from <code>english.txt</code> will be skipped.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ join --header roman.txt english.txt
NBR Roman Text
<span style="color:#bd93f9">1</span> I One
<span style="color:#bd93f9">2</span> II Two
<span style="color:#bd93f9">3</span> III Three
<span style="color:#bd93f9">4</span> IV Four
</code></pre></div><p>**left outer join: print matched records and unmatched from <code>FILE 1</code></p>
<p>The <code>-a 1</code> option prints the unmatched record from <code>FILE 1</code> along with the matched records. By default, the unmatched records will not have any data for the <code>FILE 2</code> columns. If we want to print default values, we need to use the <code>-e VAL</code> and <code>-o auto</code> options.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ join --header -a <span style="color:#bd93f9">1</span> roman.txt english.txt
NBR Roman Text
<span style="color:#bd93f9">1</span> I One
<span style="color:#bd93f9">2</span> II Two
<span style="color:#bd93f9">3</span> III Three
<span style="color:#bd93f9">4</span> IV Four
<span style="color:#bd93f9">5</span> V

<span style="color:#6272a4"># print NA for missing values; see record: `5 V NA`</span>
$ join --header -a <span style="color:#bd93f9">1</span> -e NA -o auto roman.txt english.txt
NBR Roman Text
<span style="color:#bd93f9">1</span> I One
<span style="color:#bd93f9">2</span> II Two
<span style="color:#bd93f9">3</span> III Three
<span style="color:#bd93f9">4</span> IV Four
<span style="color:#bd93f9">5</span> V NA
</code></pre></div><p>**right outer join: print matched records and unmatched from <code>FILE 2</code></p>
<p>The <code>-a 2</code> option prints matched records and unmatched records from <code>FILE 2</code>. Missing values from <code>FILE 1</code> against the unmatched records will display <code>NA</code>. Look at record <code>0 NA Zero</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ join --header -a <span style="color:#bd93f9">2</span> -e NA -o auto roman.txt english.txt
NBR Roman Text
<span style="color:#bd93f9">0</span> NA Zero
<span style="color:#bd93f9">1</span> I One
<span style="color:#bd93f9">2</span> II Two
<span style="color:#bd93f9">3</span> III Three
<span style="color:#bd93f9">4</span> IV Four
</code></pre></div><p><strong>full outer join: print matched and unmatched records from both files</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ join --header -a <span style="color:#bd93f9">1</span> -a <span style="color:#bd93f9">2</span> -e NA -o auto roman.txt english.txt
NBR Roman Text
<span style="color:#bd93f9">0</span> NA Zero
<span style="color:#bd93f9">1</span> I One
<span style="color:#bd93f9">2</span> II Two
<span style="color:#bd93f9">3</span> III Three
<span style="color:#bd93f9">4</span> IV Four
<span style="color:#bd93f9">5</span> V NA
</code></pre></div><p><strong>extract unmatched records only</strong></p>
<p>Sometimes, we might be interested in <strong>missing records</strong>; for example, if we run a same code twice with expectations that we should get same number of records with matching fields. We can verify this expectation by running the <code>join</code> command with no options. If the record count of both files are same and the count of output records matches with input count then our expectation is met. However if we see differences in record counts between input files or input and output, we need to know which keys did not match between the two files.</p>
<p>We can use the <code>-v N</code> option to suppress the matched records and <code>-a N</code> to display the unmatched records from <code>FILE N</code> (N=1 or 2). We can get the unmatched records from one of the files or both files. Furthermore, if we are just interested in only the keys, we can display the keys alone using the <code>-o</code> option.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># join:</span>
<span style="color:#6272a4">#   --header: treat first record as header and use if for display</span>
<span style="color:#6272a4">#   -v 1 : suppress matching records</span>
<span style="color:#6272a4">#   -a 1 : display unmatched records from FILE 1</span>
<span style="color:#6272a4">#   -o 0 : display only the keys</span>
$ join --header -v <span style="color:#bd93f9">1</span> -a <span style="color:#bd93f9">1</span> -o <span style="color:#bd93f9">0</span> roman.txt english.txt
NBR
<span style="color:#bd93f9">5</span>

<span style="color:#6272a4"># unmatched records from FILE 2: -v 2 -a 2</span>
$ join --header -v <span style="color:#bd93f9">2</span>  -a <span style="color:#bd93f9">2</span> -o <span style="color:#bd93f9">0</span> roman.txt english.txt
NBR
<span style="color:#bd93f9">0</span>

<span style="color:#6272a4"># unmatched records from both files</span>
$ join --header -v <span style="color:#bd93f9">2</span>  -a <span style="color:#bd93f9">2</span> -a <span style="color:#bd93f9">1</span> -o <span style="color:#bd93f9">0</span> roman.txt english.txt
NBR
<span style="color:#bd93f9">0</span>
<span style="color:#bd93f9">5</span>
</code></pre></div><p><strong>override input field delimiter and specify matching field numbers</strong></p>
<p>If the files we use in <code>join</code> has a different delimiter, then we can use the <code>-t CHAR</code> to override the default delimiter (space). Both input files should have the same delimiter.</p>
<p>Let us create a <code>roman.csv</code> file as a comma-delimited file and swap field 1 and 2. Let us also create another file called <code>num_string.csv</code> with numbers spelt in English, German as field 1 and 2 and matching field (arabic numerals) as field 3.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ head -2 roman.csv
Roman,NBR
I,1

$ head -2 num_string.csv
English,German,NUM
Zero,Null,0

<span style="color:#6272a4"># join -t: input delim, -1 N and -2 N : matching field numbers</span>
$ join --header -t, -1 <span style="color:#bd93f9">2</span> -2 <span style="color:#bd93f9">3</span> roman.csv num_string.csv
NBR,Roman,English,German
1,I,One,Eins
2,II,Two,Zwei
3,III,Three,Drei
4,IV,Four,Vier
</code></pre></div><p><strong>reorder output fields</strong></p>
<p>In the above example, the output of <code>join</code> will be formatted as follows; key, fields from file 1 followed by fields from file 2. This can be overridden using the <code>-o</code> option where <code>0</code> represents the key field and <code>FILE_NBR:FIELD_NBR</code> to specify the individual fields. For example <code>-o 0 1.2 2.1</code> is to print key followed by 2nd field from file 1 and 1st field from file 2.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ $ join --header -t, -1 <span style="color:#bd93f9">2</span> -2 <span style="color:#bd93f9">3</span> -o <span style="color:#f1fa8c">&#34;0 2.1 1.1 2.2&#34;</span>  roman.csv num_string.csv
NBR,English,Roman,German
1,One,I,Eins
2,Two,II,Zwei
3,Three,III,Drei
4,Four,IV,Vier
</code></pre></div><p><strong>case-insensitive comparison</strong></p>
<p>When <code>join</code> compares the matching fields, it does a case-sensitive comparison, that makes the uppercase and lowercase letters as distinct entities. Sometimes, we may not care about the case of the alphabets in the key. We can use the <code>-i</code> option to enable case-insensitive comparison.</p>
<blockquote>
<p>If we use <code>-i</code>, the files have to be sorted by keeping uppercase and lowercase values together. See the <code>-f</code> option in <code>sort</code> command in the next section for more info.</p>
</blockquote>
<blockquote>
<p>The matching key will be from the first file passed as argument to the <code>join</code> command</p>
</blockquote>
<p>For the case-insensitive comparison, let use replace the numbers with alphabets; uppercase in one file and lowercase in another file and create a new set of files.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ head -3 alpha_roman.txt
NBR Roman
b II
c III

$ head -3 alpha_num.txt
NUM Text
A One
B Two

<span style="color:#6272a4"># inner join: no matches due to case difference</span>
$ join --header alpha_roman.txt alpha_num.txt
NBR Roman Text

<span style="color:#6272a4"># key will be taken from file 1</span>
$ join --header -i alpha_roman.txt alpha_num.txt
NBR Roman Text
b II Two
c III Three
d IV Four

$ join --header -i alpha_num.txt alpha_roman.txt
NUM Text Roman
B Two II
C Three III
D Four IV
</code></pre></div><h3 id="sort-sort-a-file"><code>sort</code>: sort a file</h3>
<p>Some of the commands we discussed so far; <code>uniq</code> and <code>join</code> and few more commands that we will discuss later; file comparison commands for example expect the input file(s) to be sorted. Understanding how the <code>sort</code> command works is very important and gaining expertise in using the command is very important for anyone who want to gain expertise using the CLI.</p>
<p>The sort command by default, sorts the records starting from column 1 all the way to the last column. It uses the <strong>ASCII</strong> value of the characters on a given column to decide the order in which the records to be sorted. For example, uppercase <code>A</code> will be sorted before lowercase <code>a</code> because of their ASCII values; <code>65</code> and <code>97</code> respectively. The records are sorted in <strong>ascending order</strong> by default.</p>
<p>The <code>sort</code> command comes with an extensive collection options to control how the records within a file will be sorted. We will look at the commonly used options and once we become familiar with these options, we can focus on other options.</p>
<p>Here are the sorting options</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-d</code></td>
<td>dictionary order; consider blanks and alphanumeric characters only</td>
</tr>
<tr>
<td><code>-n</code></td>
<td>numeric sort; instead of column-by-column comparison, treat a sequence of numbers as single entity for sorting</td>
</tr>
<tr>
<td><code>-h</code></td>
<td>human-readable sorting on byte size; 10K, 2M, 1G etc..</td>
</tr>
<tr>
<td><code>-M</code></td>
<td>month sort; JAN, FEB, MAR, etc&hellip;</td>
</tr>
<tr>
<td><code>-k</code></td>
<td>specify field numbers / column position as sort keys</td>
</tr>
<tr>
<td><code>-f</code></td>
<td>case-insensitive sort</td>
</tr>
<tr>
<td></td>
<td>some versions of <code>sort</code> does case-insensitive sort by default</td>
</tr>
<tr>
<td><code>-r</code></td>
<td>sort in descending order; reverse sort</td>
</tr>
<tr>
<td><code>-R</code></td>
<td>random sort; shuffle the records but keep sort keys of same value together</td>
</tr>
<tr>
<td><code>-m</code></td>
<td>merge already sorted files together</td>
</tr>
<tr>
<td><code>-u</code></td>
<td>unique sort; keep only the first occurrence of record based on the sort key</td>
</tr>
</tbody>
</table>
<p>Here are some options to override the default configuration settings.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-t CH</code></td>
<td>override default field separator (space) with <code>CH</code></td>
</tr>
<tr>
<td><code>-T DIR</code></td>
<td>override default temp directory used (<code>/tmp</code>)</td>
</tr>
<tr>
<td><code>-o FILE</code></td>
<td>write sorted output to <code>FILE</code></td>
</tr>
<tr>
<td><code>-c</code></td>
<td>check whether a file is already sorted or not</td>
</tr>
<tr>
<td></td>
<td>error message if not sorted</td>
</tr>
<tr>
<td><code>-C</code></td>
<td>same as <code>-c</code> but suppress the error message</td>
</tr>
<tr>
<td></td>
<td>use <code>echo $?</code> to check; 0=OK, 1=Not OK</td>
</tr>
</tbody>
</table>
<p><strong>sort a names file: case-sensitive and case-insensitive</strong></p>
<p>Sorting of alphabets is usually case-sensitive, that is uppercase alphabets are sorted before the lowercase due to their ASCII values; uppercase alphabets have smaller ASCII value compared to the lowercase alphabets. We can use the <code>-f</code> option to perform a case-insensitive sort.</p>
<blockquote>
<p>Depending on the sort command version, the case-insensitive comparison may be done by default. <code>sort</code> command in google cloud shell does an case-insensitive sort whereas <code>sort</code> command in Macbook does a case-sensitive sort.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat names.txt
Macias
gerald
Huang
Gordon
diana
Daugherty
Cook
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># mac os: case-sensitive sort by default</span>
$ sort names.txt
Cook
Daugherty
Gordon
Huang
Macias
diana
gerald

<span style="color:#6272a4"># google cloud shell: case-insensitive sort by default</span>
$ sort names.txt
Cook
Daugherty
diana
gerald
Gordon
Huang
Macias
</code></pre></div><p>If we want to sort case-sensitive explicitly, we can set the LOCALE environment variable as <code>LC_ALL=C</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># case-sensitive sort: setting LC_ALL=C env variable</span>
<span style="color:#6272a4"># LC_ALL: Language LOCALE settings</span>
<span style="color:#6272a4"># uppercase before lowercase</span>
$ <span style="color:#8be9fd;font-style:italic">LC_ALL</span><span style="color:#ff79c6">=</span>C sort names.txt
Cook
Daugherty
Gordon
HuangMacias
diana
gerald

<span style="color:#6272a4"># case-insensitive sort</span>
$ <span style="color:#8be9fd;font-style:italic">LC_ALL</span><span style="color:#ff79c6">=</span>C sort -f names.txt
</code></pre></div><p><strong>reverse sort using <code>-r</code></strong></p>
<p>By default, the records are sorted in <strong>ascending order</strong> and we can use <code>-r</code> to reverse sort in <strong>descending order</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># reverse sort along with case-fold / case-insensitive sort</span>
$ sort -f -r names.txt
Macias
Huang
Gordon
gerald
diana
Daugherty
Cook
</code></pre></div><p><strong>numeric sort</strong></p>
<p>By default, <code>sort</code> performs an ASCII sort, comparing the ASCII value of the characters in each column to arrange the records in ascending order. If two records have same value in a given column, <code>sort</code> moves to the next column and performs the comparison.</p>
<p>The <code>-n</code> option overrides this behaviour and forces <code>sort</code> to treat consecutive numbers separated; a field to be treated as a whole in numeric form rather than sequence of characters. Let us sort a file with random number and see how the <code>-n</code> impacts the way sorting occurs.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat rand_nums.txt
<span style="color:#bd93f9">22675</span>
<span style="color:#bd93f9">81</span>
<span style="color:#bd93f9">91</span>
...
..
<span style="color:#bd93f9">3</span>
<span style="color:#bd93f9">9</span>
<span style="color:#bd93f9">8634</span>
</code></pre></div><p>default sort; column wise sort that grouped all <code>1</code> together at column 1 and sorted ascending on column 2, &hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sort rand_nums.txt
<span style="color:#bd93f9">116</span>
<span style="color:#bd93f9">151400</span>
<span style="color:#bd93f9">199</span>
<span style="color:#bd93f9">22057</span>
<span style="color:#bd93f9">22675</span>
<span style="color:#bd93f9">3</span>
<span style="color:#bd93f9">3149</span>
<span style="color:#bd93f9">81</span>
<span style="color:#bd93f9">8634</span>
<span style="color:#bd93f9">88</span>
<span style="color:#bd93f9">9</span>
<span style="color:#bd93f9">91</span>
</code></pre></div><p>numeric sort: set of characters treated as numbers</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sort -n rand_nums.txt
<span style="color:#bd93f9">3</span>
<span style="color:#bd93f9">9</span>
<span style="color:#bd93f9">81</span>
<span style="color:#bd93f9">88</span>
<span style="color:#bd93f9">91</span>
<span style="color:#bd93f9">116</span>
<span style="color:#bd93f9">199</span>
<span style="color:#bd93f9">3149</span>
<span style="color:#bd93f9">8634</span>
<span style="color:#bd93f9">22057</span>
<span style="color:#bd93f9">22675</span>
<span style="color:#bd93f9">151400</span>
</code></pre></div><p><strong>sorting human-readable file size: KB, MB, GB, TB, &hellip;</strong></p>
<p>In order to sort by file-size displayed in human-readable form, sort provides <code>-h</code> option. If we use the <code>ls</code> option to display the file list by size, we can use <code>ls -lSh</code> or <code>ls -lShr</code> to apply sort in the command itself. Sometimes, we may get the details as a report or a file. In that case, we will use <code>-h</code> along with other commands like <code>cut</code> to extract file name and size to sort by file size.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sort rand_file_size.txt
1G
1T
20K
2G
2K
2M
3.4K
<span style="color:#bd93f9">987</span>

$ sort -h rand_file_size.txt
<span style="color:#bd93f9">987</span>
2K
3.4K
20K
2M
1G
2G
1T
</code></pre></div><p><strong>sort using portion of a file</strong></p>
<p>The <code>sort</code> command has the <code>-k</code>  or <code>--key=KEYDEF</code> option to sort the file using parts of the records. If it is fixed-format file, we can use start and end column numbers. For delimited files, we can specify the delimiter using <code>-t</code> and list the field numbers by which we want the file to be sorted. We can specify more one set of keys.</p>
<p>The <code>-k</code> accepts argument <code>FIELD_NBR.COL_POS</code> with optional sort type like <code>h</code>, <code>n</code> that will be local to the specific key alone. For example <code>-k1.9,1.12n -k1.1,1.5</code> means perform a numeric sort using columns <code>9-12</code> then sort by columns <code>1-5</code>. For the fixed format files the <code>FIELD_NBR</code> is always <code>1</code>.</p>
<p>For the delimited files, we can use the field numbers and optionally column numbers within the field itself. For example, <code>-k2 -k5n -k1</code> means sort by the second field, fifth field numerically and the first field. <code>-k2.6,2.10</code> means sort by the second field but consider only the column <code>6-10</code> from field 2.</p>
<p>Here is the student file we have used in <code>cut</code> demo. Let us sort the file with following criteria</p>
<ol>
<li>grade: field 6</li>
<li>score: field 7 numeric sort, reverse</li>
<li>data-of birth: year, month date - key and month sort</li>
<li>Last Name</li>
<li>First Name</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat student_math.csv
S00001,Huang,Amanda,30-NOV-2010,MATH,06,58,Z
S00002,Sherman,Cody,23-MAY-2009,MATH,07,89,Z
S00003,Gordon,Heidi,09-NOV-2009,MATH,07,87,Z
S00004,Gomez,Kelly,29-APR-2010,MATH,06,92,Z
S00005,Cook,Lisa,28-SEP-2011,MATH,05,83,Z
S00006,Daugherty,Joshua,05-APR-2011,MATH,05,94,Z
S00007,Macias,Emma,21-SEP-2009,MATH,07,79,Z
</code></pre></div><p>Here is the command with options to perform different types of sorting supported by the sort command; numeric, reverse, month, keys etc.. You may create your own file with duplicate values for any of these fields and try it out for better understanding.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># -t,        : comma-delimited file</span>
<span style="color:#6272a4"># -k6,6      : #6 is grade</span>
<span style="color:#6272a4"># -k7,7rn    : #7 is score; numeric and descending</span>
<span style="color:#6272a4"># -k4.8,4.11 : #4 is DOB, sort by year @pos 8-11 of field 4</span>
<span style="color:#6272a4"># -k4.4,4.6M : sort by Month in &#39;MMM&#39; using &#39;-m&#39; option</span>
<span style="color:#6272a4"># -k4.1,4.2  : sort by date</span>
<span style="color:#6272a4"># -k2,2 -k3.3: last name and first name </span>
$ sort -t, -k6,6 -k7,7rn -k4.8,4.11 -k4.4,4.6M -k4.1,4.2 -k2,2 -k3.3 student_math.csv 

S00082,Ross,Scott,05-FEB-2010,MATH,06,85,Z
S00017,Stone,James,30-MAR-2010,MATH,06,84,Z
S00041,Rush,Kristina,14-AUG-2010,MATH,06,84,Z
S00078,Golden,Valerie,10-JAN-2010,MATH,06,83,Z
S00058,Ayala,Keith,29-FEB-2010,MATH,06,83,Z
</code></pre></div><h3 id="uniq-get-unique-values-counts-from-sorted-data"><code>uniq</code>: get unique values, counts from &ldquo;sorted&rdquo; data</h3>
<p>The <code>uniq</code> command at its simplest form will display unique values by removing the duplicate entries. In order for the command to work, the <strong>input should be in sorted order</strong>. Using additional options, the <code>uniq</code> command can</p>
<ul>
<li>return the one occurrence of entries that has duplicates</li>
<li>return all the duplicates, not just one entries</li>
<li>count the number of occurrences of each entry</li>
</ul>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-u</code></td>
<td>return entries that does not have any duplicates</td>
</tr>
<tr>
<td><code>-d</code></td>
<td>return one occurrence per entry that has duplicates</td>
</tr>
<tr>
<td><code>-D</code></td>
<td>return all occurrences of entries with duplicates</td>
</tr>
<tr>
<td><code>-c</code></td>
<td>count the number of occurrences of each entry</td>
</tr>
</tbody>
</table>
<p><strong>less commonly used options</strong>:</p>
<p>These options can home in handy if we need to check uniqueness only on part of record. We can skip first <code>N</code> bytes or fields not in the middle, I have documented these options for awareness and if interested, please explore on your own</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-i</code></td>
<td>ignore case while comparing</td>
</tr>
<tr>
<td><code>-f N</code></td>
<td>skip <code>N</code> fields (separated by spaces or TAB)</td>
</tr>
<tr>
<td><code>-s N</code></td>
<td>skip <code>N</code> characters from the start for comparison</td>
</tr>
<tr>
<td><code>-w N</code></td>
<td>consider only <code>N</code> characters for comparison</td>
</tr>
</tbody>
</table>
<p><strong>get uniq subject list from student.txt</strong></p>
<p>The <strong>subject code</strong> is 4 bytes long string starting at position 42. Here are the steps</p>
<ol>
<li>extract the subject code using the <code>cut</code> command</li>
<li>sort the data extract from <code>cut</code></li>
<li>pass it to <code>uniq</code></li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ head -3 student.txt
S00001 Kim        Ivan       19-Nov-2012 MATH <span style="color:#bd93f9">04</span>  <span style="color:#bd93f9">99</span> Z
S00001 Kim        Ivan       19-Nov-2012 SCIE <span style="color:#bd93f9">04</span>  <span style="color:#bd93f9">99</span> Z
S00001 Kim        Ivan       19-Nov-2012 SOCS <span style="color:#bd93f9">04</span>  <span style="color:#bd93f9">88</span> Z

<span style="color:#6272a4"># get subject list</span>
$ cut -c42-45 student.txt | sort | uniq
MATH
SCIE
SOCS
</code></pre></div><p><strong>get number of records by grade from student.txt</strong></p>
<p>The <strong>grade</strong> is 2 bytes long string starting at position 47. Here are the steps</p>
<ol>
<li>extract the grade using <code>cut</code> command</li>
<li><code>sort</code> the grades</li>
<li>pass it to <code>uniq</code> with <code>-c</code> option</li>
<li>the results will be displayed as <code>COUNTS GRADE</code></li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># grade 03 has 51 records, ...</span>
$ cut -c47-48 student.txt | sort | uniq -c
     <span style="color:#bd93f9">51</span> <span style="color:#bd93f9">03</span>
     <span style="color:#bd93f9">60</span> <span style="color:#bd93f9">04</span>
     <span style="color:#bd93f9">60</span> <span style="color:#bd93f9">05</span>
     <span style="color:#bd93f9">72</span> <span style="color:#bd93f9">06</span>
     <span style="color:#bd93f9">57</span> <span style="color:#bd93f9">07</span>
</code></pre></div><p><strong>find students with same last name</strong></p>
<p>The <strong>student.txt</strong> file has multiple records per student; one per subject that needs additional command pipeline. Here are the steps</p>
<ol>
<li>extract student id, last name and first name using <code>cut</code></li>
<li><code>sort</code> the results and get <code>uniq</code> combination of these 3 fields</li>
<li>extract last name using <code>cut</code></li>
<li><code>sort</code> the last names</li>
<li>pass the sorted last names to <code>uniq</code> with <code>-d</code> option</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cut -c1-28 student.txt | sort | uniq | cut -c8-17 | sort | uniq -d
Evans
Hernandez
Jones
May
Miller
Rivera
Ward

<span style="color:#6272a4"># The file has 2 students with same last name: WARD</span>
S00065 Ward       Daniel
S00093 Ward       Marcus
</code></pre></div><p><strong>find students with uniq and duplicate last names</strong></p>
<p>We need to do the same steps from the previous example except for the last step. We will add two more commands to <code>cut -c1-28 student.txt | sort | uniq | cut -c8-17 | sort</code></p>
<ol>
<li>for students with unique last names, we will use <code>uniq -u</code></li>
<li>for students with shared last names, we will use <code>uniq -D</code></li>
<li>since these two may produce a long list, we will pipe the results to <code>wc -l</code> to just get the count</li>
<li>we can verify the counts against the unique students on the original file and compare it with the sum of uniq + shared last name counts</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># get count of students with unique last name</span>
$ cut -c1-28 student.txt | sort | uniq | cut -c8-17 | sort | uniq -u | wc -l
<span style="color:#bd93f9">84</span>

<span style="color:#6272a4"># get counts of students with shared last names</span>
$ cut -c1-28 student.txt | sort | uniq | cut -c8-17 | sort | uniq -D | wc -l
<span style="color:#bd93f9">16</span>

<span style="color:#6272a4"># get record counts of student.txt</span>
$ cut -c1-28 student.txt | sort | uniq | wc -l
<span style="color:#bd93f9">100</span>

<span style="color:#6272a4"># 100 == 84 + 16 ---&gt; MATCHES !!!</span>
</code></pre></div><h3 id="tr-substitute-delete-or-squeeze-characters"><code>tr</code>: substitute, delete or squeeze characters</h3>
<p>The <code>tr</code> command is an abbreviation for translate is used to perform data manipulation at individual character level. We can do the following using <code>tr</code></p>
<ol>
<li>substitute one character with another</li>
<li>delete a set of characters</li>
<li>delete everything other than a given set of characters</li>
<li>squeeze or remote duplicate characters that are next to each other</li>
</ol>
<blockquote>
<p>The <code>tr</code> command accepts input from <strong>stdin</strong> or <strong>pipe</strong> only</p>
</blockquote>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-d SET</code></td>
<td>delete from input all the characters from <code>SET</code></td>
</tr>
<tr>
<td><code>-c</code></td>
<td>complement, when used with <code>-d</code> as <code>-dc SET</code>, it deletes all the characters that are not in <code>SET</code></td>
</tr>
<tr>
<td><code>-s SET</code></td>
<td>remove duplicates of all characters in <code>SET</code> that are next to each other</td>
</tr>
<tr>
<td><code>-t SET1 SET2</code></td>
<td>while substituting characters from <code>SET1</code> by  <code>SET2</code>, truncate <code>SET1</code> to match the length of <code>SET2</code></td>
</tr>
</tbody>
</table>
<p><strong>convert uppercase to lowercase</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;HELLO World&#34;</span> | tr <span style="color:#f1fa8c">&#39;A-Z&#39;</span> <span style="color:#f1fa8c">&#39;a-z&#39;</span>
hello world

$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;HELLO World&#34;</span> | tr <span style="color:#ff79c6">[[</span>:upper:<span style="color:#ff79c6">]]</span> <span style="color:#ff79c6">[[</span>:lower:<span style="color:#ff79c6">]]</span>
hello world
</code></pre></div><p><strong>substitution cipher: ROT13</strong></p>
<p>The <code>tr</code> command can be used to create simple ciphers by substituting one character with another. This is also called as <strong>caesar cipher</strong> as it was reportedly used by Julius Caesar himself. The <strong>ROT13</strong> is a special case of caesar cipher that shifts the character position by 13; <code>a</code> by <code>n</code>, <code>b</code> by <code>o</code>,.. We can use <code>tr</code> to create ciphers like this.</p>
<p><strong>Note:</strong> The substituted text will revert itself if we process the text with the <code>tr</code> command that created it in the first place. This can be cracked with repeated attempts using the <code>tr</code> command itself.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;Hello World&#34;</span> | tr <span style="color:#f1fa8c">&#39;A-Za-z&#39;</span> <span style="color:#f1fa8c">&#39;N-ZA-Mn-za-m&#39;</span>
Uryyb Jbeyq

<span style="color:#6272a4"># translate to lowercase first and create cipher</span>
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;Hello World&#34;</span> | tr <span style="color:#f1fa8c">&#39;A-Z&#39;</span> <span style="color:#f1fa8c">&#39;a-z&#39;</span> | tr <span style="color:#f1fa8c">&#39;a-z&#39;</span> <span style="color:#f1fa8c">&#39;n-za-m&#39;</span>
uryyb jbeyq

<span style="color:#6272a4"># get the original text back</span>
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;uryyb jbeyq&#34;</span> | tr <span style="color:#f1fa8c">&#39;a-z&#39;</span> <span style="color:#f1fa8c">&#39;n-za-m&#39;</span>
hello world

$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;hello world&#34;</span> | tr <span style="color:#f1fa8c">&#39;a-z&#39;</span> <span style="color:#f1fa8c">&#39;n-za-m&#39;</span> | tr <span style="color:#f1fa8c">&#39;a-z&#39;</span> <span style="color:#f1fa8c">&#39;n-za-m&#39;</span>
hello world
</code></pre></div><p>The character sets used, <code>a-z</code> and <code>n-za-m</code> should be of same length and here <code>a-z</code> means starting from <strong>ASCII</strong> value of <code>a</code> to <code>z</code> that is 26 lowercase alphabets and <code>n-za-m</code> also has same 26 alphabets.</p>
<p>What happens if we have less characters in <code>SET1</code> than <code>SET2</code>? The extract characters will be discarded and it will not have any impact. On the other hand, if we have more characters in <code>SET1</code> compared to <code>SET2</code>, the last character in <code>SET2</code> will be repeated to match the length of <code>SET1</code>.</p>
<p>For example <code>tr 'aeiou' 'AE'</code> will be treated as <code>tr 'aeiou' 'AEEEE'</code>. If we do not want the default behaviour then we can use the <code>-t</code> flag that truncates the excess characters in <code>SET1</code>. For example <code>tr -t 'aeiou' 'AE'</code> will be treated as <code>tr -t'ae' 'AE'</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;education&#34;</span> | tr <span style="color:#f1fa8c">&#39;aeiou&#39;</span> <span style="color:#f1fa8c">&#39;AE&#39;</span>
EdEcAtEEn

$  <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;education&#34;</span> | tr -t <span style="color:#f1fa8c">&#39;aeiou&#39;</span> <span style="color:#f1fa8c">&#39;AE&#39;</span>
EducAtion

<span style="color:#6272a4"># use case: replace all numbers with *</span>
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#39;Current Salary is &#34;65000.00 USD&#34;&#39;</span> | tr <span style="color:#f1fa8c">&#39;0-9&#39;</span> <span style="color:#f1fa8c">&#39;*&#39;</span>
Current Salary is <span style="color:#f1fa8c">&#34;*****.** USD&#34;</span>
</code></pre></div><p><strong>delete characters</strong></p>
<p>The <code>-d SET</code> option removes all the characters from <code>SET</code> whereas the <code>-d -c SET</code> will remove all the characters that are not in <code>SET</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;education&#34;</span> | tr -d <span style="color:#f1fa8c">&#39;aeiou&#39;</span>
dctn

$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;education&#34;</span> | tr -dc <span style="color:#f1fa8c">&#39;aeiou&#39;</span>
euaio
</code></pre></div><p><strong>squeeze characters</strong>
The <code>-s SET</code> option removes the duplicate characters when they are repeated. we can use it to remove extra spaces in sentences for example.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;hello     world&#34;</span>
hello     world
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;hello     world&#34;</span> | tr -s <span style="color:#f1fa8c">&#39; &#39;</span>
hello world
</code></pre></div><h3 id="column-format-data-in-tabular-form"><code>column</code>: format data in tabular form</h3>
<p>The <code>column</code> command is very useful if we want out output to be formatted as column-oriented or tabular output. This comes handy while viewing delimited files as each field may be of different length, viewing and understanding the data may pose difficulties</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-s SET</code></td>
<td>set of delimiters to be used to split record to fields</td>
</tr>
<tr>
<td><code>-t</code></td>
<td>determine the number of columns in the input first</td>
</tr>
</tbody>
</table>
<p><strong>pretty print CSV file in tabular format</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ head -5 student.csv | cut -d, -f1-7
Id,LastName,FirstName,DOB,grade,subject,score
S00001,Kim,Ivan,MATH,19-Nov-2012,04,99
S00001,Kim,Ivan,SCIE,19-Nov-2012,04,99
S00001,Kim,Ivan,SOCS,19-Nov-2012,04,88
S00002,Pena,Bryan,MATH,07-Jun-2013,03,57

$ head -5 student.csv | cut -d, -f1-7 | column -s, -t
Id      LastName  FirstName  DOB   grade        subject  score
S00001  Kim       Ivan       MATH  19-Nov-2012  <span style="color:#bd93f9">04</span>       <span style="color:#bd93f9">99</span>
S00001  Kim       Ivan       SCIE  19-Nov-2012  <span style="color:#bd93f9">04</span>       <span style="color:#bd93f9">99</span>
S00001  Kim       Ivan       SOCS  19-Nov-2012  <span style="color:#bd93f9">04</span>       <span style="color:#bd93f9">88</span>
S00002  Pena      Bryan      MATH  07-Jun-2013  <span style="color:#bd93f9">03</span>       <span style="color:#bd93f9">57</span>
</code></pre></div><h3 id="colrm-remove-columns-from-file-and-print"><code>colrm</code>: remove columns from file and print</h3>
<p>This is a simpler version of the <code>cut</code> command the remove columns based on the <code>start</code> and <code>stop</code> index provided as argument. If only one number is provided, it will be considered as <strong>stop index</strong> and the command displays record from column 1 to one column before the index. If both <strong>start</strong> and <strong>stop</strong> indices are provided then the command removes the columns from start to the stop.  The command accepts a file or input from stdin for processing</p>
<blockquote>
<p>The index starts with 1 not 0</p>
</blockquote>
<blockquote>
<p>We can just remove one set of contiguous columns</p>
</blockquote>
<p><strong>using fixed format text file</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># sample file</span>
$ head -5 student.txt
S00001 Huang      Amanda     30-Nov-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">58</span> Z
S00002 Sherman    Cody       23-May-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">89</span> Z
S00003 Gordon     Heidi      09-Nov-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">87</span> Z
S00004 Gomez      Kelly      29-Apr-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">92</span> Z
S00005 Cook       Lisa       28-Sep-2011 MATH <span style="color:#bd93f9">05</span>  <span style="color:#bd93f9">83</span> Z
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># get student id, last and first name</span>
<span style="color:#6272a4"># extract col 1-29</span>
$ head -5 student.txt | colrm <span style="color:#bd93f9">30</span>
S00001 Huang      Amanda
S00002 Sherman    Cody
S00003 Gordon     Heidi
S00004 Gomez      Kelly
S00005 Cook       Lisa

<span style="color:#6272a4"># discard data of birth and display other columns</span>
$ head -5 student.txt | colrm <span style="color:#bd93f9">30</span> <span style="color:#bd93f9">41</span>
S00001 Huang      Amanda     MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">58</span> Z
S00002 Sherman    Cody       MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">89</span> Z
S00003 Gordon     Heidi      MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">87</span> Z
S00004 Gomez      Kelly      MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">92</span> Z
S00005 Cook       Lisa       MATH <span style="color:#bd93f9">05</span>  <span style="color:#bd93f9">83</span> Z
</code></pre></div><p><strong>using STDIN</strong></p>
<pre><code># get column 1-4 alone
$ echo 'abcdefghijklm' | colrm 5
abcd

# remove column 5-8: efgh
$ echo 'abcdefghijklm' | colrm 5 8
abcdijklm

# same as above; using cut command
$ echo 'abcdefghijklm' | cut -c5-8  --complement
abcdijklm
</code></pre><h3 id="cmp-compare-two-files-byte-by-byte"><code>cmp</code>: compare two files byte by byte</h3>
<p><code>cmp</code> is one of the 3 file comparison command we will discuss in this chapter. This is the simplest command of the 3 that compares two files byte-by-byte. If both files are same, it displays nothing otherwise a message that says <em>files differ at byte N, Line N</em>.</p>
<blockquote>
<p><code>cmp</code> command display the line number and the position where the difference starts.</p>
</blockquote>
<p>The command sets return code <code>0</code> if both files are same, <code>1</code> if there is any difference and <code>2</code> if there are any issues with the argument or options. Use the <code>echo $?</code> command after running <code>cmp</code> to display the return code.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-i N</code></td>
<td>skip <code>N</code> bytes from both files before comparison</td>
</tr>
<tr>
<td><code>-i M:N</code></td>
<td>skip <code>M</code> bytes from <code>FILE 1</code> and</td>
</tr>
<tr>
<td></td>
<td><code>N</code> bytes from <code>FILE 2</code> before comparison</td>
</tr>
<tr>
<td><code>-n N</code></td>
<td>consider only <code>N</code> bytes for comparison</td>
</tr>
<tr>
<td><code>-s</code></td>
<td>suppresses normal output;</td>
</tr>
<tr>
<td></td>
<td>error messages will still be displayed.</td>
</tr>
<tr>
<td></td>
<td>use <code>echo $?</code> to find the status of comparison</td>
</tr>
<tr>
<td><code>-l</code></td>
<td><strong>verbose</strong> displays byte at which the command found the difference</td>
</tr>
<tr>
<td></td>
<td>and the value at byte number from both files</td>
</tr>
</tbody>
</table>
<blockquote>
<p><code>cmp</code> is one of the rare commands that DOES NOT use <code>-v</code> for turning on <strong>verbosity</strong>. It uses <code>-l</code> instead. <code>-v</code> is used to display the version of the <code>cmp</code> command</p>
</blockquote>
<p><strong>Examples:</strong></p>
<p><strong>sample files</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat cmp_demo_01.txt
NumBERS: 0123456789X

$ cat cmp_demo_02.txt
Numbers: <span style="color:#bd93f9">0123</span> <span style="color:#bd93f9">5</span> <span style="color:#bd93f9">7</span>  X

$ cat cmp_demo_03.txt
NUMS: 0123456789X
</code></pre></div><p><strong>basic comparison</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># compare as it is</span>
<span style="color:#6272a4"># difference at byte 4 of line 1; &#39;B&#39; in file 1 and &#39;b&#39; in file 2</span>
$ cmp cmp_demo_01.txt cmp_demo_02.txt
cmp_demo_01.txt cmp_demo_02.txt differ: byte 4, line <span style="color:#bd93f9">1</span>

<span style="color:#6272a4"># -i 8: skip first 8 bytes from both files</span>
<span style="color:#6272a4"># 14th byte has &#39;3&#39; in file 1 and &#39; &#39; in file 2</span>
$ cmp -i <span style="color:#bd93f9">8</span> cmp_demo_01.txt cmp_demo_02.txt 
cmp_demo_01.txt cmp_demo_02.txt differ: byte 6, line <span style="color:#bd93f9">1</span>

<span style="color:#6272a4"># same command but in silent mode</span>
<span style="color:#6272a4"># use &#39;echo $?&#39; to display return code</span>
$ cmp -i <span style="color:#bd93f9">8</span> -s cmp_demo_01.txt cmp_demo_02.txt 

<span style="color:#6272a4"># rc: 0=files are same, 1=files are different</span>
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$?</span>
<span style="color:#bd93f9">1</span>

<span style="color:#6272a4"># -n 5: compare only 5 bytes after skipping first 8 bytes</span>
<span style="color:#6272a4"># 5 bytes match </span>
$ cmp -i <span style="color:#bd93f9">8</span> -n <span style="color:#bd93f9">5</span> cmp_demo_01.txt cmp_demo_02.txt 
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$?</span>
<span style="color:#bd93f9">0</span>
</code></pre></div><p><strong>more comparison</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat cmp_demo_01.txt cmp_demo_03.txt
NumBERS: 0123456789X
NUMS: 0123456789X

<span style="color:#6272a4"># -i M:N : skip M bytes from file 1 and N bytes from file 2</span>
<span style="color:#6272a4"># skip &#34;NumBER&#34; from file 1 and &#34;NUM&#34; from file 2</span>
$ cmp -i 6:3 cmp_demo_01.txt cmp_demo_03.txt

<span style="color:#6272a4"># matched</span>
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$?</span>
<span style="color:#bd93f9">0</span>
</code></pre></div><p>The <code>-l</code> option provides the byte numbers where there are difference and the value from both files. The example below has <code>6  64 40</code>. This means at <strong>byte 6</strong>, file 1 has <strong>64</strong> and <strong>40</strong> as internal representation of 4 and spaces. This is not exactly the ASCII value. For more info, look at <em>Little and Big Endian</em> representation of data</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># -l: verbose</span>
<span style="color:#6272a4"># skip some bytes and compare files</span>
<span style="color:#6272a4"># the command compares &#34;0123456789X&#34; and &#34;0123 5 7  X&#34;</span>
$ cmp -i8 -l cmp_demo_01.txt cmp_demo_02.txt
 <span style="color:#bd93f9">6</span>  <span style="color:#bd93f9">64</span>  <span style="color:#bd93f9">40</span>
 <span style="color:#bd93f9">8</span>  <span style="color:#bd93f9">66</span>  <span style="color:#bd93f9">40</span>
<span style="color:#bd93f9">10</span>  <span style="color:#bd93f9">70</span>  <span style="color:#bd93f9">40</span>
<span style="color:#bd93f9">11</span>  <span style="color:#bd93f9">71</span>  <span style="color:#bd93f9">40</span>

</code></pre></div><h3 id="diff-compare-files-line-by-line"><code>diff</code>: compare files line by line</h3>
<p>The <code>diff</code> command is much more sophisticated than the command. It compares two files line-by-line and display the lines that are different. For better comparison, both files should be sorted. There is a <code>diff3</code> command like <code>diff</code> but it compares 3 files instead of 2.</p>
<p>The command sets <strong>return code 0</strong>, if both files are identical and <strong>1</strong> if there are differences. We can use the <code>echo $?</code> command to display the return code after running the <code>diff</code> command.</p>
<blockquote>
<p><strong>Note</strong>: The output of the <code>diff</code> command can be used with another command called <code>patch</code> to merge the differences between the two files and update the original file. Discussion on <code>patch</code> is beyond the scope.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-s</code></td>
<td>display a message when both files are identical; prints nothing by default</td>
</tr>
<tr>
<td><code>-q</code></td>
<td>display a message when both files differ instead of printing the actual differences</td>
</tr>
<tr>
<td><code>-i</code></td>
<td>ignore case of alphabets during comparison</td>
</tr>
<tr>
<td><code>-N</code></td>
<td>treat file not found as empty file</td>
</tr>
<tr>
<td><code>-b</code></td>
<td>ignore whitespaces</td>
</tr>
<tr>
<td><code>-y</code></td>
<td>print the differences side-by-side; we can use <code>sdiff</code> instead of <code>diff -y</code></td>
</tr>
</tbody>
</table>
<p><strong>Other option(s)</strong></p>
<p><code>--suppress-common-lines</code> can be used with <code>-y</code> to suppress matching records</p>
<p><strong>Examples</strong>:</p>
<p>Both files has same contents except few records that has all uppercase. File 2 has one extra record</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat student_file_v1.txt
S00001 HUANG      AMANDA     30-NOV-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">58</span> Z
S00002 Sherman    Cody       23-May-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">89</span> Z
S00003 Gordon     Heidi      09-Nov-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">87</span> Z
S00004 GOMEZ      KELLY      29-APR-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">92</span> Z
S00005 Cook       Lisa       28-Sep-2011 MATH <span style="color:#bd93f9">05</span>  <span style="color:#bd93f9">83</span> Z
S00006 Daugherty  Joshua     05-Apr-2011 MATH <span style="color:#bd93f9">05</span>  <span style="color:#bd93f9">94</span> Z
S00007 MACIAS     EMMA       21-SEP-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">79</span> Z

$ cat student_file_v2.txt
S00001 Huang      Amanda     30-Nov-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">58</span> Z
S00002 Sherman    Cody       23-May-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">89</span> Z
S00003 Gordon     Heidi      09-Nov-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">87</span> Z
S00004 Gomez      Kelly      29-Apr-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">92</span> Z
S00005 Cook       Lisa       28-Sep-2011 MATH <span style="color:#bd93f9">05</span>  <span style="color:#bd93f9">83</span> Z
S00006 Daugherty  Joshua     05-Apr-2011 MATH <span style="color:#bd93f9">05</span>  <span style="color:#bd93f9">94</span> Z
S00007 Macias     Emma       21-Sep-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">79</span> Z
S00008 Molina     William    21-Sep-2011 MATH <span style="color:#bd93f9">05</span>  <span style="color:#bd93f9">57</span> Z

$ cp -v student_file_v2.txt student_file_v2.txt.bk
<span style="color:#f1fa8c">&#39;student_file_v2.txt&#39;</span> -&gt; <span style="color:#f1fa8c">&#39;student_file_v2.txt.bk&#39;</span>
</code></pre></div><p><strong><code>diff</code> without any options</strong></p>
<p>By default, <code>diff</code> performs a case-sensitive comparison and displays records that are different. In this case records 1, 4 and 7 are different.</p>
<blockquote>
<p>Records with difference from <strong>FILE 1</strong> are prefixed with <code>&lt;</code> and <strong>FILE 2</strong> are prefixed with <code>&gt;</code>. The <code>---</code> is a placeholder to indicate that there are matched records in between.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ diff student_file_v1.txt student_file_v2.txt
1c1
&lt; S00001 HUANG      AMANDA     30-NOV-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">58</span> Z
---
&gt; S00001 Huang      Amanda     30-Nov-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">58</span> Z
4c4
&lt; S00004 GOMEZ      KELLY      29-APR-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">92</span> Z
---
&gt; S00004 Gomez      Kelly      29-Apr-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">92</span> Z
7c7
&lt; S00007 MACIAS     EMMA       21-SEP-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">79</span> Z
---
&gt; S00007 Macias     Emma       21-Sep-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">79</span> Z
&gt; S00008 Molina     William    21-Sep-2011 MATH <span style="color:#bd93f9">05</span>  <span style="color:#bd93f9">57</span> Z
</code></pre></div><p><strong><code>diff -q</code>: display a message if both files are different</strong></p>
<p>By default <code>diff</code> prints the differences between two files. If we are not concerned about the actual differences, we can use the <code>-q</code> option to print a message when there are differences.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ diff -q student_file_v1.txt student_file_v2.txt
Files student_file_v1.txt and student_file_v2.txt differ

$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$?</span>
<span style="color:#bd93f9">1</span>
</code></pre></div><p><strong><code>diff -s</code>: display a message if both files are identical</strong></p>
<pre><code># no output if files are identical: default
$ diff student_file_v2.txt student_file_v2.txt.bk

# -s: display a message if both files are identical
$ diff -s student_file_v2.txt student_file_v2.txt.bk
Files student_file_v2.txt and student_file_v2.txt.bk are identical
</code></pre><p><strong>Discard the output and inspect $?</strong></p>
<p>The <code>-s</code> and <code>-q</code> commands display the status as message when the files are identical and different respectively. However since we will not know in advance whether the files are going to match or not. If we do not need the actual differences, we can redirect the output of the <code>diff</code> command to <code>/dev/null</code>, a special device file that acts like a <strong>Recycle Bin</strong>. We call it as <strong>bitbucket</strong> or <strong>black hole</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># discard differences </span>
$ diff student_file_v1.txt student_file_v2.txt &gt; /dev/null

<span style="color:#6272a4"># echo $?: 0=identical, 1=differences</span>
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$?</span>
<span style="color:#bd93f9">1</span>

<span style="color:#6272a4"># compare original and backup; no messages if files are identical</span>
$ diff student_file_v2.txt student_file_v2.txt.bk

<span style="color:#6272a4"># echo $?: 0=identical, 1=differences</span>
$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$?</span>
<span style="color:#bd93f9">0</span>
</code></pre></div><p><strong><code>diff -i</code>: case-insensitive comparison</strong></p>
<p>The first example we saw, the <code>diff</code> command without any option performs a <strong>case-sensitive</strong> comparison. At times, the only difference between two files might be the case of the alphabet. For example, version 1 of the file might have names in <strong>title case</strong> and version 2 of the file is changed to have names in <strong>uppercase</strong>. If we want to compare these files and find out the real differences such as extra or missing records or differences in fields, we can use the <code>-i</code> option to perform a <strong>case-insensitive</strong> comparison.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># records 1, 4 and 7 matched with -i option</span>
$ diff -i student_file_v1.txt student_file_v2.txt
7a8
&gt; S00008 Molina     William    21-Sep-2011 MATH <span style="color:#bd93f9">05</span>  <span style="color:#bd93f9">57</span> Z
</code></pre></div><p><strong><code>diff -N</code>: Dealing with <code>File Not Found</code> issues</strong></p>
<p>By default, if one of the file passed as argument is non-existing, the <code>diff</code> command displays an error message and set <strong>return code 2</strong>. The <code>-N</code> option instructs diff to treat <strong>non-existent file</strong> as an <strong>empty files</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ diff student_file_v4.txt student_file_v1.txt
diff: student_file_v4.txt: No such file or directory

$ diff -N student_file_v4.txt student_file_v1.txt
0a1,7
&gt; S00001 HUANG      AMANDA     30-NOV-2010 MATH <span style="color:#bd93f9">06</span>  <span style="color:#bd93f9">58</span> Z
&gt; S00002 Sherman    Cody       23-May-2009 MATH <span style="color:#bd93f9">07</span>  <span style="color:#bd93f9">89</span> Z
</code></pre></div><p><strong><code>diff -b</code>: Dealing with leading and trailing blanks</strong></p>
<p>Let us extract the last names from the <code>student_file_v*.txt</code> and compare the files. We will cut 10 bytes from one file and 11 bytes from another file and run <code>diff</code> with and without <code>-b</code> option.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># add an empty line and extract last names from v1 file</span>
$ cut -c8-18 student_file_v1.txt  &gt; names_v1.txt

<span style="color:#6272a4"># extract last names from v1 file and add an empty line</span>
$ cut -c8-17 student_file_v2.txt &gt; names_v2.txt

<span style="color:#6272a4"># display one record from each file and show newline as $</span>
$ head -1 names_v* | cat -E
<span style="color:#ff79c6">==</span>&gt; names_v1.txt &lt;<span style="color:#ff79c6">==</span>$
HUANG      $
<span style="color:#ff79c6">==</span>&gt; names_v2.txt &lt;<span style="color:#ff79c6">==</span>$
Huang     $

<span style="color:#6272a4"># compare case-insensitive and ignore leading/trailing blanks</span>
<span style="color:#6272a4"># one extra record &#34;Molina&#34; in file 2 and </span>
<span style="color:#6272a4"># one blank rec each</span>
$ diff -bi  names_v1.txt names_v2.txt
1d0
&lt;
8a8,10
&gt; Molina
&gt;
</code></pre></div><p><strong><code>diff -y</code>: side by side comparison</strong></p>
<p>We can use <code>diff -y</code> or <code>sdiff</code> to compare two files and display the matched and unmatched records side-by-side. Unlike the default <code>diff</code>, the <code>-y</code> option displays both matched and unmatched records. If we do not want to see the matched records, we can use the <code>--suppress-matched-lines</code> option along with <code>-y</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ diff -y names_v1.txt names_v2.txt
              | Huang
HUANG         | Sherman
Sherman       | Gordon
Gordon        | Gomez
GOMEZ         | Cook
Cook          | Daugherty
Daugherty     | Macias
MACIAS        |
              &gt; Molina
              &gt; 

<span style="color:#6272a4"># suppress trailing blanks and case-insensitive compare</span>
<span style="color:#6272a4"># discard matched records</span>
<span style="color:#6272a4"># one blank records in each file and one extra record</span>
$ diff -b -y -i --suppress-common-lines   names_v1.txt names_v2.txt
             &lt;
             &gt;
             &gt; Molina
</code></pre></div><h3 id="comm-compare-2-sorted-files-side-by-side"><code>comm</code>: compare 2 sorted files side-by-side</h3>
<p>The <code>comm</code> command is a good choice to compare files with short records like name lists. It compares the files and displays a 3 column output; column 1 contains records unique to <code>FILE 1</code>, column 2 is unique records from <code>FILE 2</code> and column 3 has the common records between 2 files.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-1</code></td>
<td>suppress unique records from <strong>FILE 1</strong></td>
</tr>
<tr>
<td><code>-2</code></td>
<td>suppress unique records from <strong>FILE 2</strong></td>
</tr>
<tr>
<td><code>-3</code></td>
<td>suppress common records from <strong>FILE 1</strong> and <strong>FILE 2</strong></td>
</tr>
<tr>
<td><code>--total</code></td>
<td>print summary; unique records count file 1 and file 2, common records count</td>
</tr>
<tr>
<td><code>--output-delim=CHAR</code></td>
<td>override output delimiter, <code>TAB</code> is the default value</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong>:</p>
<p>Let us tweak the <code>names_v1.txt</code> and <code>names_v2.txt</code> files a bit by keeping 3 common records and 2 unique records each in sorted order.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat names_v1.txt
Cook
Daugherty
Gomez
Gordon
Huang
Macias

$ cat names_v2.txt
Gomez
Gordon
Huang
Macias
Molina
Sherman
</code></pre></div><p><strong><code>comm</code>: basic comparison</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ comm names_v1.txt names_v2.txt
Cook
Daugherty
                Gomez
                Gordon
                Huang
                Macias
        Molina
        Sherman
</code></pre></div><p><strong><code>comm</code>: suppress columns</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># show only unique records from FILE 1</span>
$ comm -2 -3 names_v1.txt names_v2.txt
Cook
Daugherty

<span style="color:#6272a4"># show only unique records from FILE 2</span>
$ comm -1 -3 names_v1.txt names_v2.txt
Molina
Sherman

<span style="color:#6272a4"># show common records between FILE 1 and FILE 2</span>
$ comm -1 -2 names_v1.txt names_v2.txt
Gomez
Gordon
Huang
Macias
</code></pre></div><p><strong><code>comm --total</code>: display comparison summary</strong></p>
<p>Even if we suppress, the summary line always shows the count of unique records from file 1, file2 and the common records count.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ comm --total names_v1.txt names_v2.txt
Cook
Daugherty
                Gomez
                Gordon
                Huang
                Macias
        Molina
        Sherman
<span style="color:#bd93f9">2</span>       <span style="color:#bd93f9">2</span>       <span style="color:#bd93f9">4</span>       total

<span style="color:#6272a4"># show only unique records from FILE 1 and summary</span>
$ comm --total -2 -3 names_v1.txt names_v2.txt
Cook
Daugherty
<span style="color:#bd93f9">2</span>       <span style="color:#bd93f9">2</span>       <span style="color:#bd93f9">4</span>       total
</code></pre></div><p><strong><code>comm</code>: display only summary</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ comm --total -1 -2 -3 names_v1.txt names_v2.txt
<span style="color:#bd93f9">2</span>       <span style="color:#bd93f9">2</span>       <span style="color:#bd93f9">4</span>       total
</code></pre></div><p><strong>Override Output delimiter</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># no trailing commas as delimiter after columns with</span>
<span style="color:#6272a4"># unique records only</span>
$ comm --output-delimiter<span style="color:#ff79c6">=</span>, names_v1.txt names_v2.txt
Cook
Daugherty
,,Gomez
,,Gordon
,,Huang
,,Macias
,Molina
,Sherman
</code></pre></div><p><strong>Get unique records from both files</strong></p>
<p>The <code>comm</code> command creates a 3 column output with <code>TAB</code> as column delimiter. If we redirect the output of <code>comm</code> into <code>tr</code> to delete the <code>TAB</code> character, then all 3 columns will become one column. To get the unique rows, we can further <code>sort</code> and <code>uniq</code> the output.</p>
<p>In order to demonstrate this, I have added some duplicate rows in both files</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># common and unique rows merged as one column (with duplicates)</span>
$ comm names_v1.txt names_v2.txt | tr -d <span style="color:#f1fa8c">&#39;\t&#39;</span>
Cook
Daugherty
Gomez
Gordon
Gordon
Gordon
Huang
Macias
Macias
Macias
Molina
Sherman

<span style="color:#6272a4"># sort the output and remove duplicates</span>
<span style="color:#6272a4"># instead of uniq we can use &#39;sort&#39; with  -u&#39;  </span>
$ comm names_v1.txt names_v2.txt | tr -d <span style="color:#f1fa8c">&#39;\t&#39;</span> | sort | uniq
Cook
Daugherty
Gomez
Gordon
Huang
Macias
Molina
Sherman
</code></pre></div><h3 id="comparison-using-file-checksum">Comparison using file <code>checksum</code></h3>
<p>We have discussed <code>diff</code>, <code>comm</code> and <code>cmp</code> commands that can be used for comparing files. At times, we are just interested in whether the files are identical or not without worrying about the actual differences. This can be accomplished by checking the return code by executing <code>echo $?</code> right after running the comparison command where return code <code>0</code> means identical and <code>1</code> means differences found.</p>
<p>Another way is to get the checksum, also known as digest or hash value of the files. Same checksum value means the files are identical. The commands <code>cksum</code>, <code>md5sum</code> and <code>shasum</code> can be used to get the checksum values. Each command uses different hashing algorithm to compute the checksum values with <code>cksum</code> being the oldest and <code>shasum</code> being the latest.</p>
<p>The <code>cksum</code> displays checksum, file size and file name. The <code>md5sum</code> and <code>shasum</code> just displays the checksum and file name.</p>
<p>Let us compare the <code>names_v[12].txt</code> files. We will make a copy of v2 as v3 for identical comparison.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cp -v names_v2.txt names_v3.txt
<span style="color:#f1fa8c">&#39;names_v2.txt&#39;</span> -&gt; <span style="color:#f1fa8c">&#39;names_v3.txt&#39;</span>

<span style="color:#6272a4">#using chksum: v2 and v3 has same checksum </span>
$ cksum names_v1.txt names_v2.txt names_v3.txt
<span style="color:#bd93f9">1628559629</span> <span style="color:#bd93f9">108</span> names_v1.txt
<span style="color:#bd93f9">3965335266</span> <span style="color:#bd93f9">96</span> names_v2.txt
<span style="color:#bd93f9">3965335266</span> <span style="color:#bd93f9">96</span> names_v3.txt

<span style="color:#6272a4"># same as cksum; v2 and v3 has same checksum</span>
<span style="color:#6272a4"># md5sum is more accurate than cksum</span>
$ md5sum names_v*
9dbff2393937f0724cd532f83756955b  names_v1.txt
9cbf9656ccd27ca37b5a3be7b5b4de71  names_v2.txt
9cbf9656ccd27ca37b5a3be7b5b4de71  names_v3.txt

<span style="color:#6272a4"># shasum is more accurate than md5sum.</span>
<span style="color:#6272a4"># we can even create longer digest using options</span>
<span style="color:#6272a4"># v2 and v3 has same cksum</span>
$ shasum names_v*
d567ba96fc3aa36c28708f9c8075cdf607bd3ea8  names_v1.txt
a44bf3187d86a30e5273e939035d9d916b10568f  names_v2.txt
a44bf3187d86a30e5273e939035d9d916b10568f  names_v3.txt
</code></pre></div><h3 id="shuf-shuffle-records--arguments"><code>shuf</code>: shuffle records / arguments</h3>
<p>The <code>shuf</code> command can be used to randomize the records from a file or the arguments passed to the command. This comes handy if we need to pick random records or words (arguments delimited by spaces). The shuffled records will be written to <strong>stdout</strong>. The options allow us to limit the number of records, duplicate records or write the output to a file.</p>
<table>
<thead>
<tr>
<th>Output</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-e</code></td>
<td>treat each arg as a input record</td>
</tr>
<tr>
<td><code>-n N</code></td>
<td>limit the number of output records</td>
</tr>
<tr>
<td><code>-r</code></td>
<td>repeat records (duplicate), use along with <code>-n</code></td>
</tr>
<tr>
<td><code>-o FILE</code></td>
<td>write to <code>FILE</code></td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong>:</p>
<p><strong><code>shuf -e ARG(s)</code>: Randomize inputs passed as arguments</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ shuf -e abcd efgh ijkl mnop qrstu vwxyz
ijkl
abcd
efgh
vwxyz
mnop
qrstu
</code></pre></div><p><strong><code>shuf -n N</code>: Limit output records</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ shuf -n3 -e abcd efgh ijkl mnop qrstu vwxyz
qrstu
ijkl
efgh
</code></pre></div><p><strong><code>shuf -n N -r</code>: repeat input records and limit records</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># duplicates: rec=1 and 4, 6 and 7, 5 and 8</span>
$ shuf -n10 -r  -e abcd efgh ijkl mnop qrstu vwxyz | nl
     <span style="color:#bd93f9">1</span>  mnop
     <span style="color:#bd93f9">2</span>  qrstu
     <span style="color:#bd93f9">3</span>  abcd
     <span style="color:#bd93f9">4</span>  mnop
     <span style="color:#bd93f9">5</span>  vwxyz
     <span style="color:#bd93f9">6</span>  ijkl
     <span style="color:#bd93f9">7</span>  ijkl
     <span style="color:#bd93f9">8</span>  vwxyz
     <span style="color:#bd93f9">9</span>  efgh
    <span style="color:#bd93f9">10</span>  qrstu
</code></pre></div><p><strong><code>shuf -o FILE</code>: shuffle and write to file</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># displays nothing, use `cat FILE` to inspect output</span>
$ shuf -n3  -o shuffle.txt -e abcd efgh ijkl mnop qrstu vwxyz

$ cat shuffle.txt
mnop
abcd
ijkl
</code></pre></div><p><strong><code>shuf</code>: randomize records from a file</strong></p>
<p>Let us add line numbers to <code>names_v1.txt</code> using the <code>nl</code> command and process it thru the <code>shuf</code> command.</p>
<blockquote>
<p><strong>DIY</strong>: Try other options discussed above with <code>shuf</code> and FILE</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ nl names_v1.txt &gt; names.txt

<span style="color:#6272a4"># original file with record numbers</span>
$ cat names.txt
     <span style="color:#bd93f9">1</span>  Cook
     <span style="color:#bd93f9">2</span>  Daugherty
     <span style="color:#bd93f9">3</span>  Gomez
     <span style="color:#bd93f9">4</span>  Gordon
     <span style="color:#bd93f9">5</span>  Huang
     <span style="color:#bd93f9">6</span>  Macias
     
<span style="color:#6272a4"># shuffled records</span>
$ shuf names.txt
     <span style="color:#bd93f9">1</span>  Cook
     <span style="color:#bd93f9">2</span>  Daugherty
     <span style="color:#bd93f9">3</span>  Gomez
     <span style="color:#bd93f9">4</span>  Gordon
     <span style="color:#bd93f9">5</span>  Huang
     <span style="color:#bd93f9">6</span>  Macias
</code></pre></div><h3 id="use-case">Use Case</h3>
<p><strong>Fake Data Creation Script</strong></p>
<blockquote>
<p>Install the <code>faker</code> module from <code>pip</code> before running this script. This document does not support copy-paste really well. you may have to type the command or create a sample file yourself</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#ff79c6">from</span> faker <span style="color:#ff79c6">import</span> Faker
<span style="color:#ff79c6">import</span> random

f <span style="color:#ff79c6">=</span> Faker()

subjects <span style="color:#ff79c6">=</span> (<span style="color:#f1fa8c">&#39;MATH&#39;</span>, <span style="color:#f1fa8c">&#39;SCIE&#39;</span>, <span style="color:#f1fa8c">&#39;SOCS&#39;</span>)

cf <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">open</span>(<span style="color:#f1fa8c">&#39;student.csv&#39;</span>, <span style="color:#f1fa8c">&#39;w&#39;</span>)
ff <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">open</span>(<span style="color:#f1fa8c">&#39;student.txt&#39;</span>, <span style="color:#f1fa8c">&#39;w&#39;</span>)

<span style="color:#ff79c6">print</span>(<span style="color:#f1fa8c">&#34;Id,LastName,FirstName,DOB,grade,subject,score,En&#34;</span>,<span style="color:#8be9fd;font-style:italic">file</span><span style="color:#ff79c6">=</span>cf)
<span style="color:#ff79c6">for</span> i <span style="color:#ff79c6">in</span> <span style="color:#8be9fd;font-style:italic">range</span>(<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">101</span>):
  stu_id  <span style="color:#ff79c6">=</span> f<span style="color:#f1fa8c">&#34;S{i:05}&#34;</span>
  lname   <span style="color:#ff79c6">=</span> f<span style="color:#ff79c6">.</span>last_name()
  fname   <span style="color:#ff79c6">=</span> f<span style="color:#ff79c6">.</span>first_name()
  birth_year  <span style="color:#ff79c6">=</span> random<span style="color:#ff79c6">.</span>randint(<span style="color:#bd93f9">2009</span>, <span style="color:#bd93f9">2013</span>)
  birth_ddmmm <span style="color:#ff79c6">=</span> f<span style="color:#ff79c6">.</span>date(<span style="color:#f1fa8c">&#34;</span><span style="color:#f1fa8c">%d</span><span style="color:#f1fa8c">-%b&#34;</span>)
  dob     <span style="color:#ff79c6">=</span> f<span style="color:#f1fa8c">&#34;{birth_ddmmm}-{birth_year}&#34;</span>
  grade   <span style="color:#ff79c6">=</span> f<span style="color:#f1fa8c">&#34;{(2021 - birth_year - 5):02}&#34;</span>

  <span style="color:#ff79c6">for</span> subj <span style="color:#ff79c6">in</span> subjects:
    scr <span style="color:#ff79c6">=</span> random<span style="color:#ff79c6">.</span>randrange(<span style="color:#bd93f9">51</span>, <span style="color:#bd93f9">100</span>)
    <span style="color:#ff79c6">print</span>(f<span style="color:#f1fa8c">&#34;{stu_id} {lname:10} {fname:10} {dob} {subj} {grade} {scr:3} Z&#34;</span>, <span style="color:#8be9fd;font-style:italic">file</span><span style="color:#ff79c6">=</span>ff)
    <span style="color:#ff79c6">print</span>(stu_id, lname, fname, dob, subj, grade, scr, <span style="color:#f1fa8c">&#34;Z&#34;</span>, sep<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;,&#34;</span>, <span style="color:#8be9fd;font-style:italic">file</span><span style="color:#ff79c6">=</span>cf)

ff<span style="color:#ff79c6">.</span>close()
cf<span style="color:#ff79c6">.</span>close()
</code></pre></div>


<footer class="footline">
    
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        
        
            
                <a class="nav nav-prev" href="/part-1/p1-ch6/" title="1.7: Viewing Files"><i class="fa fa-chevron-left"></i></a>
            
            
                <a class="nav nav-next" href="/part-1/p1-ch8/" title="1.9: Running Commands"><i class="fa fa-chevron-right"></i></a>
            
        
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1632053186"></script>
    <script src="/js/perfect-scrollbar.min.js?1632053186"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1632053186"></script>
    <script src="/js/jquery.sticky.js?1632053186"></script>
    <script src="/js/jquery.svg.pan.zoom.js?1632053186"></script>
    <script src="/js/featherlight.min.js?1632053186"></script>
    <script src="/js/modernizr.custom-3.6.0.js?1632053186"></script>
    
        
            <script src="/js/mermaid.min.js?1632053186"></script>
        
        
            
        
        <script>
            if (mermaid) {
                mermaid.mermaidAPI.initialize( Object.assign( { "securityLevel": "antiscript" }, JSON.parse("{ \"startOnLoad\": true }"), { startOnLoad: false } ) );
            }
        </script>
    
    <script src="/js/relearn.js?1632053186"></script>
    

  </body>
</html>

